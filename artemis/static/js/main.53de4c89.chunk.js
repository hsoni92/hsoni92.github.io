(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{169:function(e,t,a){e.exports=a.p+"static/media/logo.c8305106.svg"},351:function(e,t,a){e.exports=a(606)},356:function(e,t,a){},359:function(e,t,a){"use strict";a.r(t),function(e){a.d(t,"encryptJSON",function(){return r}),a.d(t,"decryptJSON",function(){return c});var n=a(362),r=function(t,a){var r=e.from("ThisIsMyFixedSalt","utf8"),c=n.pbkdf2Sync(a,r,1e5,32,"sha256"),l=JSON.stringify(t),o=n.randomBytes(16),s=n.createCipheriv("aes-256-cbc",c,o),i=s.update(l,"utf8","base64");i+=s.final("base64");var u=n.createHash("sha256").update(i).digest("hex");return{iv:o.toString("base64"),ciphertext:i,hash:u}},c=function(t,a){var r=e.from("ThisIsMyFixedSalt","utf8"),c=n.pbkdf2Sync(a,r,1e5,32,"sha256"),l=t.iv,o=t.ciphertext,s=t.hash,i=n.createDecipheriv("aes-256-cbc",c,e.from(l,"base64")),u=i.update(o,"base64","utf8");if(u+=i.final("utf8"),n.createHash("sha256").update(o).digest("hex")!==s)throw new Error("Hash mismatch. The data may have been tampered with.");return JSON.parse(u)}}.call(this,a(35).Buffer)},364:function(e,t){},366:function(e,t){},376:function(e,t){},378:function(e,t){},405:function(e,t){},406:function(e,t){},411:function(e,t){},413:function(e,t){},420:function(e,t){},439:function(e,t){},606:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(100),l=a.n(c),o=(a(356),a(1)),s=a.n(o),i=a(3),u=a(7),m=a(8),d=a(13),f=a(20),h=a(14),p=a(638),g=a(623),E=a(340),v=a(104),b=a(87),S=a(4),O=a(635),C=a(629),y=a(644),R=a(238),w=a(633),A=a(640),N=a(12),P=a.n(N),D={INSTANCE_URL:"INSTANCE_URL",CURRENT_PAGE:"CURRENT_PAGE",USERNAME:"USERNAME",PASSWORD:"PASSWORD",ROLE:"ROLE",REMEMBER:"REMEMBER",APP_NAME:"Artemis Cluster",PAGES:{USERS_LIST:"list",MAP:"map",DASHBOARD:"dashboard",STORAGE:"storage",CLUSTER:"cluster"},ACTIONS:{DB_STATUS:"db-status",LIST_NODE:"list-node",ADD_NODE:"add-node",ADD_USER:"add-user",DELETE_USER:"delete-user",DELETE_NODE:"delete-node",SEARCH_NODE:"search-node",GET_NODE_CONTENTS:"get-node-contents",LIST_ALLOCATION:"list-allocation",SET_ALLOCATION:"set-allocation",LIST_USER:"list-user",SCHEMA:"schema"},USER_ROLE:{ADMIN:"admin",CONSUMER:"consumer"},API_TABLES:{CLUSTER:"cluster",USERS:"users"},BUSY_MSGS:["Loading... Feel free to spin in your chair.","Loading... Insert quarter to speed up.","Loading... Turn on speakers for elevator music.","Loading... I think I am, therefore, I am. I think.","Loading... Prepare for awesomeness.","Loading... I am behind you! Ha, ha, gotcha...","Loading... Please hold on as we reheat our coffee","Loading... Counting backwards from infinity..."],GREEK_GODS:["Abraxas","Achilles","Adonis","Ajax","Apollo","Argo","Ares","Atlas","Cadmus","Castor","Cronus","Damon","Dionysius","Endymion","Eros","Eryx","Evander","Griffin","Hades","Hector","Helios","Herakles","Hermes","Homer","Icarus","Janus","Jason","Leander","Morpheus","Nereus","Oceanus","Odysseus","Olimpio","Orion","Orpheus","Pan","Paris","Parthenios","Perseus","Pollux","Poseidon","Priam","Pyramus","Thanatos","Theseus","Triton","Troy","Troilus","Zephyr","Zeus","Acantha","Alala","Althea","Andromeda","Anthea","Aphrodite","Ariadne","Arete","Artemis","Asia","Asteria","Astraea","Atalanta","Athena","Aura","Aegle","Calliope","Calypso","Cassandra","Cassiopeia","Clio","Cybele","Cynthia","Daphne","Delia","Demeter","Echo","Eos","Gaia","Halcyon","Hebe","Hera","Hermione","Hero","Hestia","Lanthe","Irene","Iris","Kore","Leda","Maia","Nephele","Nyx","Pallas","Pandora","Penelope","Phoebe","Rhea","Selene","Xanthe"]};function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}var j=function(e){Object(d.a)(a,e);var t=_(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c)))._renderHTML=function(){var t=D.APP_NAME.split(" ");return r.a.createElement("div",{style:{fontSize:"".concat(e.props.size,"em")},className:"app-name-title"},r.a.createElement("span",null,t[0]," "),r.a.createElement("span",null,t[1]))},e}return Object(m.a)(a,[{key:"render",value:function(){return this._renderHTML()}}]),a}(n.Component),I=a(169),x=a.n(I),k=a(12).extend,L=a(359),T=(L.encryptJSON,L.decryptJSON),U=a(455).initializeApp,M=a(607),B=M.getAuth,H=(M.updateProfile,M.createUserWithEmailAndPassword,M.signInWithEmailAndPassword),G=B(U({apiKey:"",projectId:"auth-service-001"})),F=function(){var e=Object(i.a)(s.a.mark(function e(t,a){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H(G,t,a);case 3:return n=G.currentUser.toJSON(),k(n,{userData:T(JSON.parse(n.photoURL),a)}),e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",null);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,a){return e.apply(this,arguments)}}(),J=a(170),z=a.n(J),W=function(){return localStorage.removeItem(D.INSTANCE_URL)},K=function(e){return localStorage.setItem(D.CURRENT_PAGE,e)},V=function(){return localStorage.getItem(D.CURRENT_PAGE)},Y=function(e,t,a){localStorage.setItem(D.USERNAME,e),localStorage.setItem(D.PASSWORD,t),localStorage.setItem(D.ROLE,a)},Z=function(e){return localStorage.setItem(D.REMEMBER,e)},q=function(){return localStorage.getItem(D.REMEMBER)||!1},X=function(){return{username:localStorage.getItem(D.USERNAME),password:localStorage.getItem(D.PASSWORD),role:localStorage.getItem(D.ROLE)}},$=function(){localStorage.removeItem(D.USERNAME),localStorage.removeItem(D.PASSWORD),localStorage.removeItem(D.ROLE)},Q=function(){window.location.reload()},ee=function(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e},te=function(){return D.BUSY_MSGS[Math.floor(Math.random()*(D.BUSY_MSGS.length-1)+0)]},ae=function(){if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){var e=(Math.floor(1e4*Math.random())+1e4).toString().substring(1);return"".concat(D.GREEK_GODS[Math.floor(Math.random()*(D.GREEK_GODS.length-1)+0)],"_").concat(e).toLowerCase()}return"".concat(D.GREEK_GODS[Math.floor(Math.random()*(D.GREEK_GODS.length-1)+0)]).toLowerCase()},ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Success";J.store.addNotification({title:t,message:e,type:"success",insert:"top",container:"top-right",animationIn:["animated fadeIn"],animationOut:["animated fadeOut"],dismiss:{duration:5e3,onScreen:!1},slidingExit:{delay:300}})},re=a(634),ce=a(150),le=a(627),oe=a(639),se=a(624),ie=a(73),ue=a(631),me=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a="gray-bg";switch(e=JSON.parse(e)){case!0:a="green-bg";break;case!1:a="red-bg";break;default:a="gray-bg"}return t?("auto"===t&&(t=e?"Up":"Down"),r.a.createElement("div",{className:"flex-row"},r.a.createElement("div",{className:"status-icon ".concat(a)}),r.a.createElement("div",{className:"status-text-item"},t))):r.a.createElement("div",{className:"status-icon ".concat(a)})},de=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a="grey";switch(!0){case e>80:a="red";break;case e>20:a="yellow";break;default:a="green"}return r.a.createElement("div",{className:"status-progress-bar"},r.a.createElement(re.a,{className:"no-margin",percent:e,size:"tiny",color:a}),t&&r.a.createElement(ce.a,{basic:!0},t))},fe=function(e){var t=te();return r.a.createElement("div",{className:"loader-progress-bar"},r.a.createElement(re.a,{percent:e,color:"blue",size:"tiny"},t))},he=function(e,t){return r.a.createElement("div",{className:"list-item-row"},r.a.createElement("div",null,r.a.createElement("b",null,e)),r.a.createElement("div",null,t))},pe=function(){return r.a.createElement(p.a,{active:!0,inverted:!0},r.a.createElement(g.a,{content:"Loading"}))};function ge(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}D.ACTIONS;var Ee=function(e){Object(d.a)(a,e);var t=ge(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).getInitialData=Object(i.a)(s.a.mark(function e(){var t,a,r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=q(),a=X(),r=a.username,c=a.password,t||(r="",c=""),n.setState({username:r,password:c,isRemember:t,loading:!1});case 4:case"end":return e.stop()}},e)})),n.onChange=function(e,t){var a;n.setState((a={},Object(S.a)(a,t,e.target.value),Object(S.a)(a,"errors",[]),a))},n.handleRemember=function(){var e=Object(b.a)({},n.state).isRemember;n.setState({isRemember:!e})},n.onClickLogin=Object(i.a)(s.a.mark(function e(){var t,a,r,c,l,o,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.username,r=t.password,c=t.isRemember,l=!0,o={},i="",n.setState({loading:!0}),e.prev=5,e.next=8,F(a,r);case 8:o=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),i=e.t0;case 14:console.log("loginResponse --\x3e ",o),l?(Y(a,r,"user"),Z(c),n.setState({loading:!1}),Q()):n.setState({loading:!1,errors:i});case 16:case"end":return e.stop()}},e,null,[[5,11]])})),n.onFocus=function(e){e.target.setAttribute("autocomplete","off"),console.log(e.target.autocomplete)},n._renderForm=function(){var e=n.state,t=e.loading,a=e.errors,c=!P.a.isEmpty(a);return r.a.createElement(w.a,{className:"login-card w-100"},r.a.createElement(w.a.Content,null,r.a.createElement("div",{className:"content-middle-container"},r.a.createElement("div",{className:"logo-container"},r.a.createElement("img",{style:{height:75,width:75},alt:"Lazarus Deployer",src:x.a})),r.a.createElement(w.a.Header,null,r.a.createElement(j,null)),r.a.createElement(O.a,{className:"alert-message-login ".concat(c?"":"invisible"),negative:!0},r.a.createElement("p",null,a.join(","))),r.a.createElement(w.a.Description,null,r.a.createElement(C.a,{autoComplete:"off"},r.a.createElement("input",{type:"text",name:"",value:"",readOnly:!0,style:{display:"none"}}),r.a.createElement(C.a.Input,{name:"address "+Math.random(),autocomplete:"off",onFocus:n.onFocus,onChange:function(e){return n.onChange(e,"username")},label:"Username",type:"text"}),r.a.createElement(C.a.Input,{name:"address "+Math.random(),autocomplete:"off",onFocus:n.onFocus,onChange:function(e){return n.onChange(e,"password")},label:"Password",type:"password"}),r.a.createElement(C.a.Field,null,r.a.createElement(y.a,{label:"Remember Me",checked:n.state.isRemember,onChange:function(){return n.handleRemember()}})),r.a.createElement(R.a,{loading:t,onClick:function(){return n.onClickLogin()},type:"submit"},"Login"))))),r.a.createElement(w.a.Content,{extra:!0},r.a.createElement("div",{className:"content-middle-container content-extra"},"Card Info")))},n._renderComponents=function(){var e=n.state,t=(e.dbHealth,e.isDatabaseUP),a=e.isInstanceSet;return a&&(t||!0),e.loading&&!a?pe():r.a.createElement(A.a,{stretched:!0,columns:3,verticalAlign:"middle",className:"grid-full-height"},r.a.createElement(A.a.Row,null,r.a.createElement(A.a.Column,null),r.a.createElement(A.a.Column,null,n._renderForm()),r.a.createElement(A.a.Column,null)))},n.state={instanceLoading:!1,dbHealth:{},isDatabaseUP:!1,loading:!0,instanceId:null,username:"",password:"",errors:[]},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getInitialData()}},{key:"render",value:function(){return r.a.createElement("div",{className:"login-main-container"},this._renderComponents())}}]),a}(n.Component),ve=(a(474),a(641)),be=a(628);function Se(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}var Oe=X().username,Ce=function(e){Object(d.a)(a,e);var t=Se(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={activeItem:"home"},e.handleItemClick=function(t,a){var n=a.name;e.setState({activeItem:n}),"logout"===n&&($(),e.props.setAppLoader(!0),Q()),"disconnect"===n&&($(),W(),e.props.setAppLoader(!0),Q())},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(ve.a,{secondary:!0,className:"navigation-bar"},r.a.createElement(ve.a.Item,null,r.a.createElement("img",{style:{height:45,width:45},alt:"Message",src:x.a})),r.a.createElement(ve.a.Item,null,r.a.createElement(j,{size:1.5})),r.a.createElement(ve.a.Menu,{position:"right"},r.a.createElement(be.a,{item:!0,text:r.a.createElement("div",null,r.a.createElement(ie.a,{name:"user outline"})," ",r.a.createElement("span",null,Oe))},r.a.createElement(be.a.Menu,null,r.a.createElement(be.a.Item,{icon:"setting",text:"Settings"}),r.a.createElement(be.a.Item,{icon:"unlinkify",name:"disconnect",text:"Disconnect",onClick:this.handleItemClick}),r.a.createElement(be.a.Item,{icon:"shutdown",name:"logout",text:"Logout",onClick:this.handleItemClick})))))}}]),a}(n.Component),ye=a(642),Re=a(637),we=a(235),Ae=(a(114),a(336)),Ne=a.n(Ae),Pe=a(597),De=function(){var e=Object(i.a)(s.a.mark(function e(t){var a,n,r,c=arguments;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:localStorage.getItem(D.INSTANCE_URL),e.prev=1,e.next=4,Ne.a.post("".concat(a),Pe.stringify(t));case 4:return n=e.sent,r=P.a.get(n,"data",[]),e.abrupt("return",{data:r});case 9:return e.prev=9,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",{data:[],error:e.t0});case 13:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=Object(i.a)(s.a.mark(function e(t){var a,n,r,c,l,o,i=arguments;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:null,n=X(),r=n.username,c=n.password,l={action:t,username:r,password:c},null!==a&&(l=P.a.extend(l,a)),e.next=6,De(l);case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(i.a)(s.a.mark(function e(){var t,a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=X(),a=t.username,n=t.password,e.abrupt("return",!Object(N.isNil)(a)&&!Object(N.isNil)(n));case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();function Ie(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}var xe=X().username,ke=D.ACTIONS,Le=function(e){Object(d.a)(a,e);var t=Ie(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).markLoadingProgress=function(e){n.setState({loadingPercentage:e})},n.healthPanel=function(e){var t=e.totalUsedStorage,a=e.totalAvailableStorage,n=[],c=!0;t>a&&(n.push("Cluster usage beyond 50%"),c=!1);var l=n.length>0?"Warning":"Good",o=n.map(function(e){return r.a.createElement("div",{className:"flex-row pt-10"},r.a.createElement(ie.a,{className:"custom-icon yellow",name:"warning circle"}),r.a.createElement("div",null,e))});return r.a.createElement(w.a,{fluid:!0},r.a.createElement(w.a.Content,{className:"flex-grow-unset",header:"Health"}),r.a.createElement(w.a.Content,{description:r.a.createElement("div",null,r.a.createElement("div",{className:"flex-row flex-jc-c"},r.a.createElement(ie.a,{className:"custom-icon mgreen",circular:!0,name:"heartbeat",size:"huge"})),r.a.createElement("div",{className:"flex-row flex-jc-c"},r.a.createElement("div",{className:"mt-10"},l)),r.a.createElement(se.a,null),r.a.createElement(ue.a,null,r.a.createElement(ue.a.Item,null,r.a.createElement(ue.a.Header,null,"Monitoring"),he("Cluster",me(!0)),he("Storage",me(c)),he("Parity",me(!0))),r.a.createElement(se.a,null),r.a.createElement(ue.a.Item,null,r.a.createElement(ue.a.Header,null,"Alerts"),n.length>0?o:r.a.createElement("div",{className:"flex-row flex-jc-c mt-50"},r.a.createElement("div",null,r.a.createElement(ie.a,{className:"custom-icon gray",name:"alarm",size:"huge"}),r.a.createElement("div",{className:"mt-10"},"No Alerts"))))))}))},n.databasePanel=function(e){var t=e.dbData,a=t.dbReference,n=t.dbList,c=P.a.get(n,"rows",[]),l=P.a.get(a,"credentials",[]),o={labels:["Used","Available"],datasets:[{label:"Number of Tables",data:[c.length,10],backgroundColor:["rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)"],borderColor:["rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)"],borderWidth:1}]};return r.a.createElement(w.a,{fluid:!0},r.a.createElement(w.a.Content,{className:"flex-grow-unset",header:"Database"}),r.a.createElement(w.a.Content,{description:r.a.createElement("div",null,r.a.createElement("div",{className:"card-chart-container"},r.a.createElement(we.a,{options:{plugins:{legend:!1}},data:o})),r.a.createElement("div",null,"Available ".concat(Math.round(c.length/10*100),"%")),r.a.createElement(se.a,null),r.a.createElement(ue.a,null,r.a.createElement(ue.a.Item,null,r.a.createElement(ue.a.Header,null,"Account"),he("Host",l.host),he("Primary Database",l.database),he("Username",l.username),he("Password",l.password)),r.a.createElement(se.a,null),r.a.createElement(ue.a.Item,null,r.a.createElement(ue.a.Header,null,"DB System"),he("Databases",c.length),he("Tables",c.length))))}))},n.storagePanel=function(e){var t=e.countNodes,a=e.totalUsedStorage,c=e.totalAvailableStorage,l={labels:["Used","Available"],datasets:[{label:"Number of Nodes",data:[a,c],backgroundColor:["rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)"],borderColor:["rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)"],borderWidth:1}]};return r.a.createElement(w.a,{fluid:!0},r.a.createElement(w.a.Content,{className:"flex-grow-unset",header:"Storage"}),r.a.createElement(w.a.Content,{description:r.a.createElement("div",null,r.a.createElement("div",{className:"card-chart-container"},r.a.createElement(we.a,{options:{plugins:{legend:!1}},data:l})),r.a.createElement("div",null,"Available ".concat(Math.round(c/(a+c)*100),"%")),r.a.createElement(se.a,null),n._statsStorage(e),r.a.createElement(se.a,null),r.a.createElement(ue.a,null,r.a.createElement(ue.a.Item,null,r.a.createElement(ue.a.Header,null,"Account"),he("User",xe),he("Nodes Allocated",t),he("Storage Available","".concat(c,"G /").concat(c+a,"G")))))}))},n.CardPanels=function(e){var t=[{header:"Nodes",description:n._statsHTML(e),meta:r.a.createElement(se.a,null)},{header:r.a.createElement(ye.a,{className:"header-with-label",size:"medium"},"Users"),description:n._statsUser(e),meta:r.a.createElement(se.a,null)}];return r.a.createElement(w.a.Group,{className:"dashboard-cards-group",items:t})},n._statsHTML=function(e){var t=e.countNodes,a=e.allocationData.map(function(e){return e.node_alias});return a=P.a.union(a),r.a.createElement("div",null,r.a.createElement(Re.a,null,r.a.createElement(Re.a.Value,null,t)),r.a.createElement(se.a,null),r.a.createElement(ue.a,null,r.a.createElement(ue.a.Item,null,he("Available",r.a.createElement(ce.a,{as:"a",basic:!0,color:"blue"},t)),he("Used",r.a.createElement(ce.a,{as:"a",basic:!0,color:"blue"},a.length)),he("Unused",r.a.createElement(ce.a,{as:"a",basic:!0,color:"blue"},t-a.length)))))},n._statsStorage=function(e){var t=e.totalAvailableStorage,a=e.totalUsedStorage;return r.a.createElement(Re.a,{size:"mini"},r.a.createElement(Re.a.Value,null,"".concat(t,"GB / ").concat(t+a,"GB")))},n._statsUser=function(e){var t=e.allUsersData,a=P.a.filter(t,function(e){return e.role===D.USER_ROLE.ADMIN}),n=P.a.filter(t,function(e){return e.role===D.USER_ROLE.CONSUMER});return r.a.createElement("div",null,r.a.createElement(Re.a,null,r.a.createElement(Re.a.Value,null,t.length)),r.a.createElement(se.a,null),r.a.createElement(ue.a,null,r.a.createElement(ue.a.Item,null,he("Admin",r.a.createElement(ce.a,{as:"a",basic:!0,color:"blue"},a.length)),he("Consumers",r.a.createElement(ce.a,{as:"a",basic:!0,color:"blue"},n.length)))))},n._renderPage=function(){var e=n.state,t=e.loading,a=e.nodes,c=e.userData,l=e.allocationData,o=e.loadingPercentage,s=e.dbData,i=P.a.get(c,"rows",[]),u=P.a.get(a,"rows",[]),m=P.a.get(a,"count",[]),d=0,f=0;u.forEach(function(e){var t=P.a.get(e,"available_space_gigabytes",0),a=P.a.get(e,"used_space_gigabytes",0);d+=t,f+=a}),d=Math.round(d);var h={dbData:s,countNodes:m,totalUsedStorage:f=Math.round(f,2),totalAvailableStorage:d,allUsersData:i,allocationData:l};return t?fe(o):r.a.createElement(A.a,{stretched:!0,columns:4},r.a.createElement(A.a.Row,null,r.a.createElement(A.a.Column,null,n.healthPanel(h)),r.a.createElement(A.a.Column,null,n.storagePanel(h)),r.a.createElement(A.a.Column,null,n.CardPanels(h)),r.a.createElement(A.a.Column,null,n.databasePanel(h))))},n.state={loadingPercentage:20,loading:!0,dbData:{},userData:{}},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(i.a)(s.a.mark(function e(){var t,a,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(ke.DB_STATUS);case 2:return t=e.sent,this.markLoadingProgress(30),e.next=6,_e(ke.LIST_USER);case 6:return a=e.sent,this.markLoadingProgress(60),e.next=10,_e(ke.LIST_NODE,{status:!0});case 10:return n=e.sent,this.markLoadingProgress(85),e.next=14,_e(ke.LIST_ALLOCATION);case 14:r=e.sent,r=P.a.get(r,"data.rows",[]),this.markLoadingProgress(100),t=P.a.get(t,"data",{}),n=P.a.get(n,"data",{}),a=P.a.get(a,"data",{}),this.setState({loading:!1,dbData:t,userData:a,nodes:n,allocationData:r});case 21:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return console.log(this.state),r.a.createElement("div",{className:"dashboard-page"},this._renderPage())}}]),a}(n.Component),Te=a(22),Ue=a(630),Me=a(632),Be=a(625),He=a(626),Ge=a(59),Fe=a(84);function Je(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}var ze=function(e){Object(d.a)(a,e);var t=Je(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={open:!1},e.setOpen=function(){e.setState({open:!0})},e.setClose=function(){e.setState({open:!1})},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.node,a=P.a.get(t,"dbReference",{}),n=[{header:"Email Credentials",icon:"mail",el:"".concat(a.email," / ").concat(a.email_password)},{header:"Storage Credentials",icon:"hdd",el:"".concat(a.email," / ").concat(a.account_password)},{header:"Access Token",icon:"key",el:"".concat(a.access_token)},{header:"Client ID",icon:"key",el:"".concat(a.client_id)},{header:"Client Secret",icon:"key",el:"".concat(a.client_secret)}];return r.a.createElement(Fe.a,{animation:"fade up",closeOnDimmerClick:!1,duration:200,onClose:function(){return e.setClose()},onOpen:function(){return e.setOpen()},open:this.state.open,trigger:this.props.trigger},r.a.createElement(Ge.a.Header,null,a.alias),r.a.createElement(Ge.a.Content,{image:!0},r.a.createElement(Ge.a.Description,null,r.a.createElement(ue.a,{divided:!0,relaxed:!0},n.map(function(e){return r.a.createElement(ue.a.Item,null,r.a.createElement(ue.a.Icon,{name:e.icon||"github",size:"large",verticalAlign:"middle"}),r.a.createElement(ue.a.Content,null,r.a.createElement(ue.a.Header,{as:"a"},e.header),r.a.createElement(ue.a.Description,{as:"a"},e.el)))})))),r.a.createElement(Ge.a.Actions,null,r.a.createElement(R.a,{onClick:function(){return e.setClose(!1)}},"Close")))}}]),a}(n.Component);function We(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}var Ke=D.ACTIONS,Ve=function(e){Object(d.a)(a,e);var t=We(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={open:!1,clusterSchema:[],errors:[]},e.onChange=function(t,a){var n;e.setState((n={},Object(S.a)(n,a,t.target.value),Object(S.a)(n,"errors",[]),n))},e.setOpen=Object(i.a)(s.a.mark(function t(){var a,n,r,c;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_e(Ke.SCHEMA,{table:"cluster"});case 2:a=t.sent,a=P.a.get(a,"data.columns",[]),n=["timestamp_created","app_name"],a=P.a.remove(a,function(e){return!n.includes(e)}),r={},a.forEach(function(e){var t=null;"alias"===e&&(t=ae()),r=P.a.extend(r,Object(S.a)({},e,t))}),c=P.a.extend(r,{loading:!1,clusterSchema:a,open:!0}),e.setState(c);case 10:case"end":return t.stop()}},t)})),e.setClose=function(){e.setState({open:!1})},e.handleSubmit=Object(i.a)(s.a.mark(function t(){var a,n,r,c;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.clusterSchema,n={},a.forEach(function(t){n=P.a.extend(n,Object(S.a)({},t,P.a.get(e.state,t,null)))}),t.next=5,_e(Ke.ADD_NODE,n);case 5:r=t.sent,"success"===(r=P.a.get(r,"data",{})).status?(e.setClose(),e.props.refreshTable(),ne(r.message)):((c=[]).push(P.a.get(r,"error",null)),e.setState({errors:c}));case 8:case"end":return t.stop()}},t)})),e._populateFormFields=function(){return e.state.clusterSchema.map(function(t){switch(t){case"alias":default:return r.a.createElement("div",null,r.a.createElement(Be.a,{fluid:!0,label:t,onChange:function(a){return e.onChange(a,t)},value:e.state[t]}))}})},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(Fe.a,{closeOnDimmerClick:!1,animation:"fade up",duration:200,onClose:function(){return e.setClose()},onOpen:function(){return e.setOpen()},open:this.state.open,trigger:this.props.trigger},r.a.createElement(Ge.a.Header,null,"Add Node"),r.a.createElement(Ge.a.Content,null,r.a.createElement(Ge.a.Description,null,r.a.createElement(C.a,{error:!0},r.a.createElement("div",{className:"add-node-form-body"},r.a.createElement(O.a,{className:this.state.errors.length>0?"visible":"invisible",error:!0,header:"Failed",content:this.state.errors.join(". ")}),this._populateFormFields())))),r.a.createElement(Ge.a.Actions,null,r.a.createElement(R.a,{onClick:function(){return e.setClose()}},"Cancel"),r.a.createElement(R.a,{content:"Submit",onClick:function(){return e.handleSubmit()},positive:!0})))}}]),a}(n.Component);function Ye(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}var Ze=D.ACTIONS,qe=function(e){Object(d.a)(a,e);var t=Ye(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).markLoadingProgress=function(e){n.setState({loadingPercentage:e})},n._getInitialState=Object(i.a)(s.a.mark(function e(){var t,a,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(Ze.LIST_NODE,{status:!0});case 2:return t=e.sent,t=P.a.get(t,"data.rows",[]),n.markLoadingProgress(60),e.next=7,_e(Ze.LIST_ALLOCATION);case 7:a=e.sent,a=P.a.get(a,"data.rows",[]),r=t,n.markLoadingProgress(100),n.setState({loading:!1,nodesData:t,nodeDataSource:r,allocationData:a,selectedEntities:[]}),n.handlePaginationChange(null,{activePage:1});case 13:case"end":return e.stop()}},e)})),n.handlePaginationChange=function(e,t){for(var a=t.activePage,r=Object(b.a)({},n.state).nodeDataSource,c=[],l=(a-1)*n.tableRowLength;l<=a*n.tableRowLength-1;l++)l<r.length&&c.unshift(r[l]);n.setState({nodesData:c,activePage:a})},n.handleConfirm=function(e){n.setState({showConfirm:e})},n.handleConfirmAction=Object(i.a)(s.a.mark(function e(){var t,a,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.selectedEntities,a=P.a.first(t),e.next=4,_e(Ze.DELETE_NODE,{alias:a});case 4:return r=e.sent,ne(P.a.get(r,"message","Node deletion successful")),n.handleConfirm(!1),e.next=9,n._getInitialState();case 9:case"end":return e.stop()}},e)})),n.onChange=function(e){var t=e.target.value,a=n.state.nodeDataSource,r=P.a.filter(a,function(e){return e.dbReference.alias.includes(t)});n.setState({nodesData:r,errors:[]})},n.handleSelect=function(e){var t=Object(b.a)({},n.state).selectedEntities;P.a.includes(t,e)?t=P.a.remove(t,function(t){return t!==e}):t.push(e),n.setState({selectedEntities:t})},n._renderNodeStatus=function(e,t,a){return me("success"===e,r.a.createElement(ze,{node:a,trigger:r.a.createElement("a",{className:"link-custom",href:!0},ee(t))}))},n._renderNodeStorage=function(e,t,a){return de(e,"".concat(t,"/ ").concat(a))},n._renderNodeAccessibility=function(e){return JSON.parse(e)?r.a.createElement(ie.a,{color:"green",name:"checkmark",size:"large"}):r.a.createElement("div",null)},n._getUsersForNode=function(e){var t=n.state.allocationData,a=P.a.filter(t,function(t){return t.node_alias===e}).map(function(e){return e.user_id});return 0===(a=P.a.union(a)).length?r.a.createElement(R.a,null,a.length):r.a.createElement(le.a,{trigger:r.a.createElement(R.a,null,a.length),flowing:!0,hoverable:!0},r.a.createElement("div",null,a.map(function(e){return r.a.createElement("div",null,e)})))},n._renderClusterTable=function(e){var t=[{header:"",dataPath:["dbReference.alias"],formatter:function(e){return r.a.createElement(y.a,{checked:P.a.includes(n.state.selectedEntities,e),onChange:function(){return n.handleSelect(e)}})}},{header:"Node",dataPath:["status","dbReference.alias","[object]"],formatter:n._renderNodeStatus},{header:"Email",dataPath:["credentials.email"]},{header:"Storage",dataPath:["percent_used","used_space","total_space"],formatter:n._renderNodeStorage},{header:"Users",dataPath:["dbReference.alias"],formatter:n._getUsersForNode},{header:"Acessible",dataPath:["dbReference.is_accessible"],formatter:n._renderNodeAccessibility}],a=e.map(function(e){return t.map(function(t){var a=P.a.get(t,"formatter",null);if(a)try{var n=t.dataPath.map(function(t){return"[object]"===t?e:P.a.get(e,t,"-")});return a.apply(void 0,Object(Te.a)(n))}catch(r){return a||"-"}return P.a.get(e,t.dataPath[0],"-")})});return P.a.isEmpty(e)?fe(n.state.loadingPercentage):r.a.createElement("div",null,r.a.createElement("div",{className:"w-100 flex-row flex-jc-fe"},r.a.createElement(Ue.a,{firstItem:null,lastItem:null,activePage:n.state.activePage,onPageChange:n.handlePaginationChange,totalPages:Math.ceil(n.state.nodeDataSource.length/n.tableRowLength)})),r.a.createElement(Me.a,{celled:!0},r.a.createElement(Me.a.Header,null,r.a.createElement(Me.a.Row,null,t.map(function(e){return r.a.createElement(Me.a.HeaderCell,null,e.header)}))),r.a.createElement(Me.a.Body,null,a.map(function(e){return r.a.createElement(Me.a.Row,null,e.map(function(e){return r.a.createElement(Me.a.Cell,null,e)}))}))))},n._renderPage=function(){var e=n.state,t=e.nodesData,a=e.nodeDataSource,c=e.loading,l=e.showConfirm,o=e.selectedEntities;return r.a.createElement(oe.a.Group,null,r.a.createElement(ye.a,{as:"h5",attached:"top"},r.a.createElement("div",null,"Cluster")),r.a.createElement(oe.a,null,r.a.createElement("div",{className:"flex-row flex-jc-sb"},r.a.createElement("div",null,r.a.createElement(Ve,{refreshTable:n._getInitialState,trigger:r.a.createElement(R.a,{icon:!0,labelPosition:"right",primary:!0},r.a.createElement(ie.a,{name:"add"}),"Node")}),r.a.createElement(be.a,{button:!0,text:"Actions"},r.a.createElement(be.a.Menu,null,r.a.createElement(be.a.Item,{disabled:1!==o.length,text:"Update"}),r.a.createElement(be.a.Item,{disabled:1!==o.length,onClick:function(){return n.handleConfirm(!0)},text:"Delete"})))),r.a.createElement(Be.a,{icon:"search",onChange:function(e){return n.onChange(e)},placeholder:"Search..."})),r.a.createElement(O.a,null,c?r.a.createElement("p",null,te()):a.length>0&&r.a.createElement("p",null,"Viewing all ",a.length," Nodes"))),r.a.createElement(oe.a,null,r.a.createElement(He.a,{confirmButton:r.a.createElement(R.a,{negative:!0},"Delete"),open:l,content:"Are you sure you want delete: ".concat(o.join(", ")," ?"),onCancel:function(){return n.handleConfirm(!1)},onConfirm:n.handleConfirmAction}),n._renderClusterTable(t)))},n.tableRowLength=5,n.state={loadingPercentage:10,showConfirm:!1,activePage:1,versioned:!0,value:1,loading:!0,nodesData:[],nodeDataSource:[],allocationData:[],selectedEntities:[]},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(i.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getInitialState();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this._renderPage()}}]),a}(n.Component),Xe=a(233),$e=a.n(Xe),Qe=a(337),et=a.n(Qe);function tt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}var at=D.ACTIONS,nt=function(e){Object(d.a)(a,e);var t=tt(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).markLoadingProgress=function(e){n.setState({loadingPercentage:e})},n._getInitialState=Object(i.a)(s.a.mark(function e(){var t,a,r,c,l,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(at.LIST_NODE,{status:!0});case 2:return t=e.sent,t=P.a.get(t,"data.rows",[]),n.markLoadingProgress(60),e.next=7,_e(at.GET_NODE_CONTENTS);case 7:a=e.sent,a=P.a.get(a,"data.result",[]),n.markLoadingProgress(100),r=a.map(function(e){var t=e.alias;return e.files.map(function(e){return"".concat(t).concat(e)})}),c=[],r.forEach(function(e){c=c.concat(e)}),l=c,o=$e()(c),n.setState({loading:!1,nodesData:t,contentsData:a,contentsDataPaths:c,contentsDataSourcePaths:l,contentsDataPathsJSON:o});case 16:case"end":return e.stop()}},e)})),n.onSearch=function(e){var t=e.target.value;P.a.debounce(function(e){!function(e){var t=n.state.contentsDataSourcePaths,a=P.a.filter(t,function(t){return t.includes(e)});n.setState({contentsDataPaths:a,contentsDataPathsJSON:$e()(a),errors:[]})}(e)},500)(t)},n._renderTreeLayout=function(e){return n.state.loading?fe(n.state.loadingPercentage):P.a.isEmpty(e)?r.a.createElement("div",null,"No results"):r.a.createElement(et.a,{src:e})},n._formatResultsMessage=function(e,t){return e.length!==t.length?"Filtered ".concat(e.length," out of ").concat(t.length," files"):"Viewing all ".concat(e.length," files")},n._renderPage=function(){var e=n.state,t=e.nodesData,a=e.contentsDataPathsJSON,c=e.contentsDataPaths,l=e.contentsDataSourcePaths,o=e.loading,s=t.map(function(e){var t=P.a.get(e,"dbReference.alias","-");return{key:t,text:t,value:t}});return r.a.createElement(oe.a.Group,null,r.a.createElement(ye.a,{as:"h5",attached:"top"},r.a.createElement("div",null,"Storage")),r.a.createElement(oe.a,null,r.a.createElement(be.a,{placeholder:"Select Node",disabled:o,loading:o,fluid:!0,multiple:!0,selection:!0,options:s})),r.a.createElement(oe.a,null,r.a.createElement("div",{className:"flex-row flex-jc-sb"},r.a.createElement("div",null,r.a.createElement(Ve,{refreshTable:n._getInitialState,trigger:r.a.createElement(R.a,{icon:!0,labelPosition:"right",primary:!0},r.a.createElement(ie.a,{name:"upload"}),"Upload")}),r.a.createElement(be.a,{button:!0,text:"Actions"},r.a.createElement(be.a.Menu,null,r.a.createElement(be.a.Item,{text:"Update"}),r.a.createElement(be.a.Item,{text:"Delete"})))),r.a.createElement(Be.a,{icon:"search",onChange:function(e){return n.onSearch(e)},placeholder:"Search..."})),r.a.createElement(O.a,null,o?r.a.createElement("p",null,te()):c.length>0&&r.a.createElement("p",null,n._formatResultsMessage(c,l)))),r.a.createElement(oe.a,{className:"scrollable-segment"},n._renderTreeLayout(a)))},n.tableRowLength=5,n.state={loadingPercentage:10,showConfirm:!1,activePage:1,value:1,loading:!0,nodesData:[],contentsData:[]},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(i.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getInitialState();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this._renderPage()}}]),a}(n.Component);function rt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}var ct=D.ACTIONS,lt=function(e){Object(d.a)(a,e);var t=rt(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={open:!1,clusterSchema:[],errors:[]},e.onChange=function(t,a){var n;e.setState((n={},Object(S.a)(n,a,t.target.value),Object(S.a)(n,"errors",[]),n))},e.setOpen=Object(i.a)(s.a.mark(function t(){var a,n,r,c;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_e(ct.SCHEMA,{table:"users"});case 2:a=t.sent,a=P.a.get(a,"data.columns",[]),n=["timestamp_created","app_name"],a=P.a.remove(a,function(e){return!n.includes(e)}),r={},a.forEach(function(e){var t=null;"alias"===e&&(t=ae()),r=P.a.extend(r,Object(S.a)({},e,t))}),c=P.a.extend(r,{loading:!1,clusterSchema:a,open:!0}),e.setState(c);case 10:case"end":return t.stop()}},t)})),e.setClose=function(){e.setState({open:!1})},e.handleSubmit=Object(i.a)(s.a.mark(function t(){var a,n,r,c;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.clusterSchema,n={},a.forEach(function(t){var a=t;"username"===t&&(a="target_username"),"password"===t&&(a="target_password"),n=P.a.extend(n,Object(S.a)({},a,P.a.get(e.state,t,null)))}),t.next=5,_e(ct.ADD_USER,n);case 5:r=t.sent,"success"===(r=P.a.get(r,"data",{})).status?(e.setClose(),e.props.refreshTable(),ne(r.message)):((c=[]).push(P.a.get(r,"error",null)),e.setState({errors:c}));case 8:case"end":return t.stop()}},t)})),e._populateFormFields=function(){return e.state.clusterSchema.map(function(t){switch(t){case"alias":default:return r.a.createElement("div",null,r.a.createElement(Be.a,{fluid:!0,label:t,onChange:function(a){return e.onChange(a,t)},value:e.state[t]}))}})},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(Fe.a,{closeOnDimmerClick:!1,animation:"fade up",duration:200,onClose:function(){return e.setClose()},onOpen:function(){return e.setOpen()},open:this.state.open,trigger:this.props.trigger},r.a.createElement(Ge.a.Header,null,"Add Node"),r.a.createElement(Ge.a.Content,null,r.a.createElement(Ge.a.Description,null,r.a.createElement(C.a,{error:!0},r.a.createElement("div",{className:"add-node-form-body"},r.a.createElement(O.a,{className:this.state.errors.length>0?"visible":"invisible",error:!0,header:"Failed",content:this.state.errors.join(". ")}),this._populateFormFields())))),r.a.createElement(Ge.a.Actions,null,r.a.createElement(R.a,{onClick:function(){return e.setClose()}},"Cancel"),r.a.createElement(R.a,{content:"Submit",onClick:function(){return e.handleSubmit()},positive:!0})))}}]),a}(n.Component);function ot(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}var st=D.ACTIONS,it=function(e){Object(d.a)(a,e);var t=ot(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={open:!1,allocationSchema:[],selectedNodes:[]},e.onChange=function(t,a){var n;e.setState((n={},Object(S.a)(n,a,t.target.value),Object(S.a)(n,"errors",[]),n))},e.onSelectChange=function(t,a){var n;e.setState((n={},Object(S.a)(n,a,t),Object(S.a)(n,"errors",[]),n))},e.setOpen=function(){var t=e.props,a=t.selectedEntities,n=t.allocationData,r=P.a.first(a),c=e._getNodesForUser(r,n);e.setState({open:!0,selectedNodes:c})},e.setClose=function(){e.setState({open:!1})},e.handleSubmit=Object(i.a)(s.a.mark(function t(){var a,n,r,c,l;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.selectedNodes,n=e.props.selectedEntities,r=P.a.first(n),t.next=5,_e(st.SET_ALLOCATION,{target_user:r,node_csv:a.join(",")});case 5:c=t.sent,"success"===(c=P.a.get(c,"data",{})).status?(e.setClose(),ne(c.message),e.props.refreshTable()):((l=[]).push(P.a.get(c,"error",null)),e.setState({errors:l}));case 8:case"end":return t.stop()}},t)})),e._getNodesForUser=function(e,t){var a=P.a.filter(t,function(t){return t.user_id===e}).map(function(e){return e.node_alias});return a=P.a.union(a)},e._populateFormFields=function(){var t=e.state,a=t.allocationSchema,n=t.selectedNodes,c=e.props,l=c.selectedEntities,o=c.nodes,s=P.a.first(l),i=o.map(function(e){var t=e.alias;return{key:t,text:t,value:t}});return a.map(function(t){switch(t){case"user_id":return r.a.createElement("div",null,r.a.createElement(Be.a,{fluid:!0,label:t,disabled:!0,value:s}));case"node_alias":return r.a.createElement("div",null,r.a.createElement(be.a,{placeholder:"Nodes",value:n,onChange:function(t,a){var n=a.value;return e.onSelectChange(n,"selectedNodes")},fluid:!0,multiple:!0,selection:!0,options:i}));default:return r.a.createElement("div",null,r.a.createElement(Be.a,{fluid:!0,label:t,onChange:function(a){return e.onChange(a,t)},value:e.state[t]}))}})},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(i.a)(s.a.mark(function e(){var t,a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(st.SCHEMA,{table:"allocations"});case 2:t=e.sent,t=P.a.get(t,"data.columns",[]),a={},t.forEach(function(e){a=P.a.extend(a,Object(S.a)({},e,null))}),n=P.a.extend(a,{loading:!1,allocationSchema:t}),this.setState(n);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(Fe.a,{closeOnDimmerClick:!1,animation:"fade up",duration:200,onClose:function(){return e.setClose()},onOpen:function(){return e.setOpen()},open:this.state.open,trigger:this.props.trigger},r.a.createElement(Ge.a.Header,null,"Manage Allocations"),r.a.createElement(Ge.a.Content,null,r.a.createElement(Ge.a.Description,null,r.a.createElement(C.a,{error:!0},r.a.createElement("div",{className:"add-node-form-body"},this._populateFormFields(),r.a.createElement(O.a,{info:!0,header:"Details",content:"You are assiging ".concat(this.props.selectedEntities[0],", ").concat(this.state.selectedNodes.length,"/").concat(this.props.nodes.length," nodes")}))))),r.a.createElement(Ge.a.Actions,null,r.a.createElement(R.a,{onClick:function(){return e.setClose()}},"Cancel"),r.a.createElement(R.a,{content:"Submit",onClick:function(){return e.handleSubmit()},positive:!0})))}}]),a}(n.Component);function ut(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}var mt=D.ACTIONS,dt=function(e){Object(d.a)(a,e);var t=ut(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).markLoadingProgress=function(e){n.setState({loadingPercentage:e})},n._getIntitalData=Object(i.a)(s.a.mark(function e(){var t,a,r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(mt.LIST_USER,{status:!0});case 2:return t=e.sent,t=P.a.get(t,"data.rows",[]),n.markLoadingProgress(30),a=t,e.next=8,_e(mt.LIST_ALLOCATION);case 8:return r=e.sent,n.markLoadingProgress(70),r=P.a.get(r,"data.rows",[]),e.next=13,_e(mt.LIST_NODE);case 13:c=e.sent,n.markLoadingProgress(100),c=P.a.get(c,"data.rows",[]),n.setState({loading:!1,usersData:t,usersDataSource:a,allocationData:r,selectedEntities:[],nodes:c}),n.handlePaginationChange(null,{activePage:1});case 18:case"end":return e.stop()}},e)})),n.handlePaginationChange=function(e,t){for(var a=t.activePage,r=Object(b.a)({},n.state).usersDataSource,c=[],l=(a-1)*n.tableRowLength;l<=a*n.tableRowLength-1;l++)l<r.length&&c.unshift(r[l]);n.setState({usersData:c,activePage:a})},n.handleConfirm=function(e){n.setState({showConfirm:e})},n.handleConfirmAction=Object(i.a)(s.a.mark(function e(){var t,a,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.selectedEntities,a=P.a.first(t),e.next=4,_e(mt.DELETE_USER,{target_username:a});case 4:return r=e.sent,ne(P.a.get(r,"message","Deletion failed")),n.handleConfirm(!1),e.next=9,n._getIntitalData();case 9:case"end":return e.stop()}},e)})),n.handleSelect=function(e){var t=Object(b.a)({},n.state).selectedEntities;P.a.includes(t,e)?t=P.a.remove(t,function(t){return t!==e}):t.push(e),n.setState({selectedEntities:t})},n._renderUserAccessibility=function(e){return JSON.parse(e)?r.a.createElement(ie.a,{color:"green",name:"checkmark",size:"large"}):r.a.createElement("div",null)},n._getNodesForUser=function(e){var t=n.state.allocationData,a=P.a.filter(t,function(t){return t.user_id===e}).map(function(e){return e.node_alias});return 0===(a=P.a.union(a)).length?r.a.createElement(R.a,null,a.length):r.a.createElement(le.a,{trigger:r.a.createElement(R.a,null,a.length),flowing:!0,hoverable:!0},r.a.createElement("div",null,a.map(function(e){return r.a.createElement("div",null,e)})))},n._renderClusterTable=function(e){var t=[{width:1,header:"",dataPath:["username"],formatter:function(e){return r.a.createElement(y.a,{name:e,onChange:function(){return n.handleSelect(e)},checked:P.a.includes(n.state.selectedEntities,e)})}},{width:4,header:"Username",dataPath:["username"]},{width:2,header:"Role",dataPath:["role"],formatter:ee},{width:4,header:"Email",dataPath:["email"]},{width:2,header:"Owner",dataPath:["owner"]},{width:1,header:"Nodes",dataPath:["username"],formatter:n._getNodesForUser},{width:1,header:"Acessible",dataPath:["access"],formatter:n._renderUserAccessibility}],a=e.map(function(e){return t.map(function(t){var a=P.a.get(t,"formatter",null);if(a)try{var n=t.dataPath.map(function(t){return"[object]"===t?e:P.a.get(e,t,"-")});return a.apply(void 0,Object(Te.a)(n))}catch(r){return a||"-"}return P.a.get(e,t.dataPath[0],"-")})});return P.a.isEmpty(e)?fe(n.state.loadingPercentage):r.a.createElement("div",null,r.a.createElement("div",{className:"w-100 flex-row flex-jc-fe"},r.a.createElement(Ue.a,{firstItem:null,lastItem:null,activePage:n.state.activePage,onPageChange:n.handlePaginationChange,totalPages:Math.ceil(n.state.usersDataSource.length/n.tableRowLength)})),r.a.createElement(Me.a,{celled:!0},r.a.createElement(Me.a.Header,null,r.a.createElement(Me.a.Row,null,t.map(function(e){return r.a.createElement(Me.a.HeaderCell,{width:e.width},e.header)}))),r.a.createElement(Me.a.Body,null,a.map(function(e){return r.a.createElement(Me.a.Row,null,e.map(function(e){return r.a.createElement(Me.a.Cell,null,e)}))}))))},n._renderPage=function(){var e=n.state,t=e.usersData,a=e.selectedEntities,c=e.nodes,l=e.allocationData,o=e.showConfirm;return r.a.createElement(oe.a.Group,null,r.a.createElement(ye.a,{as:"h5",attached:"top"},r.a.createElement("div",null,"Users")),r.a.createElement(oe.a,null,r.a.createElement(lt,{refreshTable:n._getIntitalData,trigger:r.a.createElement(R.a,{icon:!0,labelPosition:"right",primary:!0},r.a.createElement(ie.a,{name:"add"}),"User")}),r.a.createElement(be.a,{button:!0,text:"Actions"},r.a.createElement(be.a.Menu,null,r.a.createElement(be.a.Item,{disabled:1!==a.length,text:"Update"}),r.a.createElement(it,{refreshTable:n._getIntitalData,allocationData:l,nodes:c,selectedEntities:a,trigger:r.a.createElement(be.a.Item,{disabled:1!==a.length,text:"Manage Allocations"})}),r.a.createElement(be.a.Item,{disabled:1!==a.length,onClick:function(){return n.handleConfirm(!0)},text:"Delete"}))),r.a.createElement(Be.a,{icon:"search",placeholder:"Search..."}),r.a.createElement(O.a,null,r.a.createElement("p",null,"Viewing all ",t.length," Users"))),r.a.createElement(oe.a,null,r.a.createElement(He.a,{confirmButton:r.a.createElement(R.a,{negative:!0},"Delete"),open:o,content:"Are you sure you want delete: ".concat(a.join(", ")," ?"),onCancel:function(){return n.handleConfirm(!1)},onConfirm:n.handleConfirmAction}),n._renderClusterTable(t)))},n.tableRowLength=5,n.state={activePage:1,showConfirm:!1,versioned:!0,value:1,loading:!0,usersData:[],usersDataSource:[],selectedEntities:[],allocationData:[],nodes:[],loadingPercentage:10},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(i.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getIntitalData();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this._renderPage()}}]),a}(n.Component);function ft(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}var ht=X().role===D.USER_ROLE.ADMIN,pt=D.PAGES,gt=function(e){Object(d.a)(a,e);var t=ft(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={activeItem:V()||pt.DASHBOARD},e.handleItemClick=function(t,a){var n=a.name;e.setState({activeItem:n})},e._renderPage=function(e){switch(K(e),e){case pt.DASHBOARD:return r.a.createElement(Le,null);case pt.CLUSTER:return r.a.createElement(qe,null);case pt.STORAGE:return r.a.createElement(nt,null);case pt.USERS_LIST:return ht?r.a.createElement(dt,null):r.a.createElement(Le,null);default:return r.a.createElement("div",null)}},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state.activeItem;return r.a.createElement("div",{className:"content-panel"},r.a.createElement(ve.a,{className:"menu-vertical-home",vertical:!0},r.a.createElement(ve.a.Item,{name:pt.DASHBOARD,active:e===pt.DASHBOARD,onClick:this.handleItemClick},r.a.createElement(ie.a,{name:"grid layout"}),ee(pt.DASHBOARD)),r.a.createElement(ve.a.Item,{name:pt.CLUSTER,active:e===pt.CLUSTER,onClick:this.handleItemClick},r.a.createElement(ie.a,{name:"cloud"}),ee(pt.CLUSTER)),ht&&r.a.createElement(ve.a.Item,null,"User Access Control",r.a.createElement(ve.a.Menu,null,r.a.createElement(ve.a.Item,{name:pt.USERS_LIST,active:e===pt.USERS_LIST,onClick:this.handleItemClick},ee(pt.USERS_LIST)),r.a.createElement(ve.a.Item,{name:pt.MAP,active:e===pt.MAP,onClick:this.handleItemClick},ee(pt.MAP)))),r.a.createElement(ve.a.Item,{name:pt.STORAGE,active:e===pt.STORAGE,onClick:this.handleItemClick},r.a.createElement(ie.a,{name:"server"}),ee(pt.STORAGE)),r.a.createElement(be.a,{item:!0,text:"More"},r.a.createElement(be.a.Menu,null,r.a.createElement(be.a.Item,{icon:"edit",text:"Edit Profile"}),r.a.createElement(be.a.Item,{icon:"globe",text:"Choose Language"}),r.a.createElement(be.a.Item,{icon:"settings",text:"Account Settings"})))),r.a.createElement("div",{className:"content-section"},this._renderPage(e)))}}]),a}(n.Component);a(600);function Et(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}var vt=function(e){Object(d.a)(a,e);var t=Et(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e))._renderPage=function(){return r.a.createElement("div",null,r.a.createElement(z.a,null),r.a.createElement(Ce,{setAppLoader:n.props.setAppLoader}),r.a.createElement(gt,null))},n.state={loggedIn:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(i.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je();case 2:t=e.sent,this.setState({loggedIn:t}),this.props.setAppLoader(!1);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this._renderPage()}}]),a}(n.Component);function bt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}var St=function(e){Object(d.a)(a,e);var t=bt(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).setAppLoader=function(e){n.setState({loading:e})},n._renderPage=function(){var e=n.state,t=e.loading,a=e.loggedIn,c=r.a.createElement(p.a,{active:!0,inverted:!0},r.a.createElement(g.a,{content:"Loading"}));return t?c:a?r.a.createElement(vt,{setAppLoader:n.setAppLoader}):r.a.createElement(Ee,{setAppLoader:n.setAppLoader})},n.state={loading:!0,loggedIn:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(i.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je();case 2:t=e.sent,this.setState({loggedIn:t,loading:!1});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(E.a,null,r.a.createElement(v.c,null,r.a.createElement(v.a,{exact:!0,path:"/",render:function(){return e._renderPage()}})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(St,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[351,1,2]]]);
//# sourceMappingURL=main.53de4c89.chunk.js.map