(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{132:function(e,t,a){e.exports=a.p+"static/media/logo.c8305106.svg"},236:function(e,t,a){e.exports=a(391)},241:function(e,t,a){},391:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(80),i=a.n(l),o=(a(241),a(7)),c=a.n(o),s=a(14),u=a(8),d=a(10),m=a(12),h=a(9),g=a(13),p=a(426),E=a(412),f=a(16),v=a(422),b=a(417),y=a(392),w=a(393),k=a(415),C=a(421),S=a(429),D=a(4),O=a.n(D),x={INSTANCE_URL:"INSTANCE_URL",USERNAME:"USERNAME",PASSWORD:"PASSWORD",BUSY_MSG_INDEX:"BUSY_MSG_INDEX",APP_NAME:"Lazarus Deployer",CURRENT_PAGE:"CURRENT_PAGE",PAGES:{WIZARD:"wizard",WIZARD_DEPLOY:"wizard_deploy",LKG:"lkg",LKG_DEPLOY:"lkg_deploy",LKG_BACKUP:"lkg_backup",EXPLORER:"Explorer",DASHBOARD:"dashboard",TUNNELS:"tunnels",ACTIVITIES:"activities",SCHEDULER:"scheduler"},ACTIONS:{GET_BACKUP_LINK:"get-backup-link",BACKUP_STATUS:"backup-status",STORAGE_STATUS:"storage-status",STORAGE_HEALTH:"storage-health",DB_STATUS:"db-status",SCHEMA:"schema",ADD_TUNNEL:"add-tunnel",DELETE_TUNNEL:"delete-tunnel",REVOKE_TUNNEL:"revoke-tunnel",PURGE_TUNNEL:"purge-tunnel",GET_TUNNELS:"get-tunnels",GET_DIR_CONTENTS:"get-dir-contents",BACKUP_ENTITY:"backup-entity",DEPLOY_ENTITY:"deploy-entity",GET_LOGS:"get-logs",GET_SCHEDULER:"get-scheduler",EXEC_SCHEDULER:"exec-scheduler",ADD_SCHEDULER:"add-scheduler",DELETE_SCHEDULER:"delete-scheduler",UPDATE_SCHEDULER:"update-scheduler"},BUSY_MSGS:["Reticulating splines...","Generating witty dialog...","Swapping time and space...","Spinning violently around the y-axis...","Tokenizing real life...","Bending the spoon...","Filtering morale...","Don't think of purple hippos...","We need a new fuse...","Have a good day.","Upgrading Windows, your PC will restart several times. Sit back and relax.","640K ought to be enough for anybody","The architects are still drafting","The bits are breeding","We're building the buildings as fast as we can","Would you prefer chicken, steak, or tofu?","(Pay no attention to the man behind the curtain)","...and enjoy the elevator music...","Please wait while the little elves draw your map","Don't worry - a few bits tried to escape, but we caught them","Would you like fries with that?","Checking the gravitational constant in your locale...","Go ahead -- hold your breath!","...at least you're not on hold...","Hum something loud while others stare","You're not in Kansas any more","The server is powered by a lemon and two electrodes.","Please wait while a larger software vendor in Seattle takes over the world","We're testing your patience","As if you had any other choice","Follow the white rabbit","Why don't you order a sandwich?","While the satellite moves into position","keep calm and npm install","The bits are flowing slowly today","Dig on the 'X' for buried treasure... ARRR!","It's still faster than you could draw it","The last time I tried this the monkey didn't survive. Let's hope it works better this time.","I should have had a V8 this morning.","My other loading screen is much faster.","Testing on Timmy... We're going to need another Timmy.","Reconfoobling energymotron...","(Insert quarter)","Are we there yet?","Have you lost weight?","Just count to 10","Why so serious?","It's not you. It's me.","Counting backwards from Infinity","Don't panic...","Embiggening Prototypes","Do not run! We are your friends!","Do you come here often?","Warning: Don't set yourself on fire.","We're making you a cookie.","Creating time-loop inversion field","Spinning the wheel of fortune...","Loading the enchanted bunny...","Computing chance of success","I'm sorry Dave, I can't do that.","Looking for exact change","All your web browser are belong to us","All I really need is a kilobit.","I feel like im supposed to be loading something. . .","What do you call 8 Hobbits? A Hobbyte.","Should have used a compiled language...","Is this Windows?","Adjusting flux capacitor...","Please wait until the sloth starts moving.","Don't break your screen yet!","I swear it's almost done.","Let's take a mindfulness minute...","Unicorns are at the end of this road, I promise.","Listening for the sound of one hand clapping...","Keeping all the 1's and removing all the 0's...","Putting the icing on the cake. The cake is not a lie...","Cleaning off the cobwebs...","Making sure all the i's have dots...","We need more dilithium crystals","Where did all the internets go","Connecting Neurotoxin Storage Tank...","Granting wishes...","Time flies when you\u2019re having fun.","Get some coffee and come back in ten minutes..","Spinning the hamster\u2026","99 bottles of beer on the wall..","Stay awhile and listen..","Be careful not to step in the git-gui","You edhall not pass! yet..","Load it and they will come","Convincing AI not to turn evil..","There is no spoon. Because we are not done loading it","Your left thumb points to the right and your right thumb points to the left.","How did you get here?","Wait, do you smell something burning?","Computing the secret to life, the universe, and everything.","When nothing is going right, go left!!...","I love my job only when I'm on vacation...","i'm not lazy, I'm just relaxed!!","Never steal. The government hates competition....","Why are they called apartments if they are all stuck together?","Life is Short \u2013 Talk Fast!!!!","Optimism \u2013 is a lack of information.....","Save water and shower together","Whenever I find the key to success, someone changes the lock.","Sometimes I think war is God\u2019s way of teaching us geography.","I\u2019ve got problem for your solution\u2026..","Where there\u2019s a will, there\u2019s a relative.","User: the word computer professionals use when they mean !!idiot!!","Adults are just kids with money.","I think I am, therefore, I am. I think.","A kiss is like a fight, with mouths.","You don\u2019t pay taxes\u2014they take taxes.","Coffee, Chocolate, Men. The richer the better!","I am free of all prejudices. I hate everyone equally.","git happens","May the forks be with you","A commit a day keeps the mobs away","This is not a joke, it's a commit.","Constructing additional pylons...","Roping some seaturtles...","Locating Jebediah Kerman...","We are not liable for any broken screens as a result of waiting.","Hello IT, have you tried turning it off and on again?","If you type Google into Google you can break the internet","Well, this is embarrassing.","What is the airspeed velocity of an unladen swallow?","Hello, IT... Have you tried forcing an unexpected reboot?","They just toss us away like yesterday's jam.","They're fairly regular, the beatings, yes. I'd say we're on a bi-weekly beating.","The Elders of the Internet would never stand for it.","Space is invisible mind dust, and stars are but wishes.","Didn't know paint dried so quickly.","Everything sounds the same","I'm going to walk the dog","I didn't choose the engineering life. The engineering life chose me.","Dividing by zero...","Spawn more Overlord!","If I\u2019m not back in five minutes, just wait longer.","Some days, you just can\u2019t get rid of a bug!","We\u2019re going to need a bigger boat.","Chuck Norris never git push. The repo pulls before.","Web developers do it with <style>","I need to git pull --my-life-together","Java developers never RIP. They just get Garbage Collected.","Cracking military-grade encryption...","Simulating traveling salesman...","Proving P=NP...","Entangling superstrings...","Twiddling thumbs...","Searching for plot device...","Trying to sort in O(n)...","Laughing at your pictures-i mean, loading...","Sending data to NS-i mean, our servers.","Looking for sense of humour, please hold on.","Please wait while the intern refills his coffee.","A different error message? Finally, some progress!","Hold on while we wrap up our git together...sorry","Please hold on as we reheat our coffee","Kindly hold on as we convert this bug to a feature...","Kindly hold on as our intern quits vim...","Winter is coming...","Installing dependencies","Switching to the latest JS framework...","Distracted by cat gifs","Finding someone to hold my beer","BRB, working on my side project","@todo Insert witty loading message","Let's hope it's worth the wait","Aw, snap! Not..","Ordering 1s and 0s...","Updating dependencies...","Whatever you do, don't look behind you...","Please wait... Consulting the manual...","It is dark. You're likely to be eaten by a grue.","Loading funny message...","It's 10:00pm. Do you know where your children are?","Waiting Daenerys say all her titles...","Feel free to spin in your chair","What the what?","format C: ...","Forget you saw that password I just typed into the IM ...","What's under there?","Your computer has a virus, its name is Windows!","Go ahead, hold your breath and do an ironman plank till loading complete","Bored of slow loading spinner, buy more RAM!","Help, I'm trapped in a loader!","What is the difference btwn a hippo and a zippo? One is really heavy, the other is a little lighter","Please wait, while we purge the Decepticons for you. Yes, You can thanks us later!","Chuck Norris once urinated in a semi truck's gas tank as a joke....that truck is now known as Optimus Prime.","Chuck Norris doesn\u2019t wear a watch. HE decides what time it is.","Mining some bitcoins...","Downloading more RAM..","Updating to Windows Vista...","Deleting System32 folder","Hiding all ;'s in your code","Alt-F4 speeds things up.","Initializing the initializer...","When was the last time you dusted around here?","Optimizing the optimizer...","Last call for the data bus! All aboard!","Running swag sticker detection...","Never let a computer know you're in a hurry.","A computer will do what you tell it to do, but that may be much different from what you had in mind.","Some things man was never meant to know. For everything else, there's Google.","Unix is user-friendly. It's just very selective about who its friends are.","Shovelling coal into the server","Pushing pixels...","How about this weather, eh?","Building a wall...","Everything in this universe is either a potato or not a potato","The severity of your issue is always lower than you expected.","Updating Updater...","Downloading Downloader...","Debugging Debugger...","Reading Terms and Conditions for you.","Digested cookies being baked again.","Live long and prosper.","There is no cow level, but there's a goat one!","Deleting all your hidden porn...","Running with scissors...","Definitely not a virus...","You may call me Steve.","You seem like a nice person...","Coffee at my place, tommorow at 10A.M. - don't be late!","Work, work...","Patience! This is difficult, you know...","Discovering new ways of making you wait...","Your time is very important to us. Please wait while we ignore you...","Time flies like an arrow; fruit flies like a banana","Two men walked into a bar; the third ducked...","Sooooo... Have you seen my vacation photos yet?","Sorry we are busy catching em' all, we're done soon","TODO: Insert elevator music","Still faster than Windows update","Composer hack: Waiting for reqs to be fetched is less frustrating if you add -vvv to your command.","Please wait while the minions do their work","Grabbing extra minions","Doing the heavy lifting","We're working very Hard .... Really","Waking up the minions","You are number 2843684714 in the queue","Please wait while we serve other customers...","Our premium plan is faster","Feeding unicorns..."],I18N:{entity:"Entity",local_path:"Hosting Path",remote_path:"Storage Directory",contents:"Contents",params:"Parameters",state:"Initial State",operation:"Operation"}},P=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l))))._renderHTML=function(){var e=x.APP_NAME.split(" ");return r.a.createElement("div",{style:{fontSize:"".concat(a.props.size,"em")},className:"app-name-title"},r.a.createElement("span",null,e[0]," "),r.a.createElement("span",null,e[1]))},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return this._renderHTML()}}]),t}(n.Component),I=a(132),N=a.n(I),T=a(216),j=a.n(T),_=a(32),A=a(113),L=a.n(A),R=function(){var e=H().split("/");return e.pop(),e.join("/")},U=function(){var e=H();return new URL(e).hostname},H=function(){return localStorage.getItem(x.INSTANCE_URL)},G=function(e){return localStorage.setItem(x.INSTANCE_URL,e)},B=function(){return localStorage.removeItem(x.INSTANCE_URL)},M=function(e){return localStorage.setItem(x.CURRENT_PAGE,e)},W=function(){return localStorage.getItem(x.CURRENT_PAGE)},F=function(){var e=O.a.random(0,x.BUSY_MSGS.length);return localStorage.setItem(x.BUSY_MSG_INDEX,e)},Y=function(e,t){localStorage.setItem(x.USERNAME,e),localStorage.setItem(x.PASSWORD,t)},K=function(){return{username:localStorage.getItem(x.USERNAME),password:localStorage.getItem(x.PASSWORD)}},z=function(){localStorage.removeItem(x.USERNAME),localStorage.removeItem(x.PASSWORD)},V=function(){window.location.reload()},J=function(e){return x.I18N.hasOwnProperty(e)?x.I18N[e]:e},X=function(e){var t=e.split(" "),a=[];return t.forEach(function(e){a.push(J(e))}),a.join(" ")},q=function(){var e=localStorage.getItem(x.BUSY_MSG_INDEX)||0;return x.BUSY_MSGS[e]},Z=function(e){var t=e;if(!e||0===e.length)return e;try{t=e.charAt(0).toUpperCase()+e.slice(1)}catch(a){}return t},$=function(e,t){for(;e.charAt(0)===t;)e=e.substring(1);for(;e.charAt(e.length-1)===t;)e=e.substring(0,e.length-1);return e},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Success",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;a*=1e3,A.store.addNotification({title:t,message:e,type:"success",insert:"top",container:"bottom-right",animationIn:["animated fadeIn"],animationOut:["animated fadeOut"],dismiss:{duration:a,onScreen:!1},slidingExit:{delay:300}})},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Failed";A.store.addNotification({title:t,message:e,type:"danger",insert:"top",container:"bottom-right",animationIn:["animated fadeIn"],animationOut:["animated fadeOut"],dismiss:{duration:5e3,onScreen:!1},slidingExit:{delay:300}})};function te(e){this.setState({loadingPercentage:e})}function ae(){var e=Object(_.a)({},this.state).loadingPercentage;e+=.1,this.setState({loadingPercentage:e})}var ne=a(276),re=function(){var e=Object(s.a)(c.a.mark(function e(t){var a,n,r,l=arguments;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:H(),e.prev=1,e.next=4,j.a.post("".concat(a),ne.stringify(t));case 4:return n=e.sent,r=O.a.get(n,"data",[]),e.abrupt("return",{data:r});case 9:return e.prev=9,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",{data:[],error:e.t0});case 13:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(s.a)(c.a.mark(function e(t){var a,n,r,l,i,o,s=arguments;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:null,n=K(),r=n.username,l=n.password,i={action:t,username:r,password:l},null!==a&&(i=O.a.extend(i,a)),e.next=6,re(i);case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(s.a)(c.a.mark(function e(t){var a,n,r,l,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={action:"health"},e.next=3,re(a,t);case 3:if(n=e.sent,r=O.a.get(n,"data.isAlive",!1),l=O.a.get(n,"error",null),r){e.next=9;break}return i=l||"This API is not deployer instance",e.abrupt("return",{url:t,error:[i],isValid:!1});case 9:return e.abrupt("return",{url:t,error:[],isValid:!0});case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(s.a)(c.a.mark(function e(t,a){var n,r,l,i,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={action:"login",username:t,password:a},e.next=3,re(n);case 3:if(r=e.sent,l="failed"!==(l=O.a.get(r,"data.status","failed")),i=O.a.get(r,"data.message","Login Failed"),l){e.next=10;break}return o=i||"Login Failed",e.abrupt("return",{error:[o],loginStatus:!1});case 10:return e.abrupt("return",{error:[],loginStatus:!0});case 11:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),ce=function(){var e=Object(s.a)(c.a.mark(function e(){var t,a,n,r,l,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=K(),a=t.username,n=t.password,r={action:"login",username:a,password:n},e.next=4,re(r);case 4:return l=e.sent,i="failed"!==(i=O.a.get(l,"data.status","failed")),e.abrupt("return",i);case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),se=a(60),ue=a(419),de=a(411),me=a(423),he=a(428),ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a="gray-bg";switch(e){case!0:a="green-bg";break;case!1:a="red-bg";break;default:a="gray-bg"}return t?("auto"===t&&(t=e?"Up":"Down"),r.a.createElement("div",{className:"flex-row"},r.a.createElement("div",{className:"status-icon ".concat(a)}),r.a.createElement("div",{className:"status-text-item"},t))):r.a.createElement("div",{className:"status-icon ".concat(a)})},pe=function(){var e="green-bg";switch(arguments.length>0&&void 0!==arguments[0]&&arguments[0]){case!0:case"success":case"good":e="green-bg";break;case!1:case"failed":e="red-bg";break;case"warning":e="yellow-bg";break;default:e="gray-bg"}return r.a.createElement("div",{className:"pulse-box"},r.a.createElement("div",{className:"pulse-css ".concat(e)}))},Ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a="gray-border";switch(e){case"success":case!0:a="green-border";break;case"progress":case"running":a="blue-border blink";break;case!1:case"failed":case"stopped":a="red-border";break;case"warning":a="yellow-border";break;default:a="gray-border"}return t?("auto"===t&&(t=e?"Up":"Down"),r.a.createElement("div",{className:"flex-row"},r.a.createElement("div",{className:"status-icon-med ".concat(a)}),r.a.createElement("div",{className:"status-text-item"},t))):r.a.createElement("div",{className:"status-icon-med ".concat(a)})},fe=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"domain@gmail.com",i=[];return a&&i.push({field:"Verified: ",value:r.a.createElement(se.a,{name:"check circle green"})}),a||i.push({field:"Verified: ",value:r.a.createElement(se.a,{name:"warning circle yellow"})}),t.eta&&i.push({field:"Created: ",value:t.eta}),t.path&&i.push({field:"Path: ",value:"Dropbox[".concat(l,"]: ").concat(t.path)}),t.server_modified&&i.push({field:"Last Modified: ",value:t.server_modified}),t.size&&i.push({field:"Size: ",value:t.size}),t.tag&&i.push({field:"Tag: ",value:t.tag}),n?r.a.createElement("div",{className:"deploy-wizard-message-container"},r.a.createElement(ue.a,null,r.a.createElement(ue.a.Item,null,r.a.createElement(ue.a.Content,null,r.a.createElement(ue.a.Header,{as:"a"},e),r.a.createElement("br",null),i.map(function(e){return r.a.createElement(ue.a.Description,{className:"path-info-list-desc"},r.a.createElement("a",{href:!0},e.field),e.value)}))))):r.a.createElement("div",{className:"deploy-wizard-message-container"},r.a.createElement(v.a,{icon:"info circle",header:"Build version",content:"Select a build version from the dropdown for deployment."}))},ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"More";if(e.length<1)return"";var a=e[0];if(1===e.length)return a;e.pop();var n=e,l=n.map(function(e){return r.a.createElement("div",null,e)});return l.unshift(r.a.createElement(de.a,null)),r.a.createElement(k.a,{content:r.a.createElement("div",null,l),key:"Details",header:"Details",trigger:r.a.createElement("div",{className:"flex-row cursor-link"},r.a.createElement("div",null,a),r.a.createElement("div",null,"\xa0",r.a.createElement("a",{href:!0},"+".concat(n.length," ").concat(t))))})},be=function(e,t){return r.a.createElement("div",{className:"list-item-row"},r.a.createElement("div",null,r.a.createElement("b",null,e)),r.a.createElement("div",null,t))},ye=function(){return r.a.createElement(p.a,{active:!0,inverted:!0},r.a.createElement(E.a,{content:"Loading"}))},we=function(e){var t=q();return r.a.createElement("div",{className:"loader-progress-bar"},r.a.createElement(me.a,{percent:e,color:"blue",size:"tiny"},t))},ke=function(){return r.a.createElement("div",{className:"flex-row w-100 flex-jc-c"},r.a.createElement(se.a,{name:"circle notched blue",loading:!0}),q())},Ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r.a.createElement("div",{className:"flex-row flex-jc-sb"},r.a.createElement("div",{className:"title-text"},e),r.a.createElement(se.a,{className:"modal-close-btn",onClick:t,name:"close"}))},Se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r.a.createElement("div",{className:"flex-row flex-jc-sb"},r.a.createElement("div",{className:"title-card-text"},e),r.a.createElement(se.a,{className:"modal-close-btn",onClick:t,name:"close"}))},De=function(e){var t=e.dbHealth,a=e.storageHealth,n=e.onClickRetry,l=e.onClickDisconnect,i="success"===O.a.get(t,"status","failed"),o="success"===O.a.get(a,"status","failed"),c=O.a.get(t,"dbReference.credentials",{}),s=O.a.get(t,"dbReference.error","Database not configured"),u=O.a.get(a,"storageReference.credentials",{}),d=O.a.get(a,"storageReference.error","Storage not configured");return r.a.createElement(he.a.Group,null,r.a.createElement(he.a,null,r.a.createElement(v.a,{negative:!0},r.a.createElement(v.a.Header,null,"Services Down"),r.a.createElement("p",null,"One of more services required by the deployer to operate are down. Below are the options you can choose to resolve the issue.")),r.a.createElement(he.a,null,r.a.createElement(S.a,{columns:2,stackable:!0,textAlign:"center"},r.a.createElement(de.a,{vertical:!0},"Or"),r.a.createElement(S.a.Row,{verticalAlign:"middle"},r.a.createElement(S.a.Column,null,r.a.createElement("p",null,"I have resolved the deployer server configurations"),r.a.createElement(y.a,{primary:!0,onClick:n},"Retry")),r.a.createElement(S.a.Column,null,r.a.createElement("p",null,"I want to connect to another deployer server instance"),r.a.createElement(y.a,{negative:!0,onClick:l},"Disconnect")))))),r.a.createElement(he.a.Group,{horizontal:!0},r.a.createElement(he.a,{className:"service-down-segment-left"},r.a.createElement(C.a,{padded:!1},r.a.createElement("div",{className:"card-icon-container"},r.a.createElement(se.a,{name:"hdd outline",size:"huge"})),r.a.createElement(C.a.Content,null,r.a.createElement(C.a.Header,null,"Storage"),r.a.createElement(C.a.Meta,null,r.a.createElement("span",{className:"date"},"Service required to backup and retrieve builds for deployment")),r.a.createElement(C.a.Description,null,r.a.createElement(ue.a,null,r.a.createElement(ue.a.Item,null,r.a.createElement(ue.a.Header,null),be("Status",ge(o)),be("Email",u.email),be("ClientID",u.ClientID),be("ClientSecret",u.ClientSecret),be("Password",u.password),be("Access Token",function(e,t){if(!e)return e;return r.a.createElement(k.a,{trigger:r.a.createElement("a",{href:!0},function(e){return e.length>t?"".concat(e.substring(0,t),"..."):e}(e)),content:e,inverted:!0})}(u.AccessToken,7)))))),r.a.createElement(C.a.Content,{extra:!0},r.a.createElement("a",{href:!0,title:d},r.a.createElement(se.a,{name:"info circle"}),"Details")))),r.a.createElement(he.a,{className:"service-down-segment-right"},r.a.createElement(C.a,null,r.a.createElement("div",{className:"card-icon-container"},r.a.createElement(se.a,{name:"server",size:"huge"})),r.a.createElement(C.a.Content,null,r.a.createElement(C.a.Header,null,"Database"),r.a.createElement(C.a.Meta,null,r.a.createElement("span",{className:"date"},"Service required for storing persistent data for this application")),r.a.createElement(C.a.Description,null,r.a.createElement(ue.a,null,r.a.createElement(ue.a.Item,null,r.a.createElement(ue.a.Header,null),be("Status",ge(i)),be("Host",c.host),be("Username",c.username),be("Password",c.password),be("Primary DB",c.database),be("",r.a.createElement("div",null,"\xa0")))))),r.a.createElement(C.a.Content,{extra:!0},r.a.createElement("a",{href:!0,title:s},r.a.createElement(se.a,{name:"info circle"}),"Details"))))))},Oe=x.ACTIONS,xe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).getInitialData=Object(s.a)(c.a.mark(function e(){var t,n,r,l,i,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(Oe.DB_STATUS);case 2:return t=e.sent,e.next=5,le(Oe.STORAGE_HEALTH);case 5:n=e.sent,t=O.a.get(t,"data",{}),n=O.a.get(n,"data",{}),r="success"===O.a.get(t,"status","failed"),l="success"===O.a.get(n,"status","failed"),i=H(),o=null!==i,a.setState({instanceLoading:!1,instanceURL:i,isInstanceSet:o,dbHealth:t,storageHealth:n,isDatabaseUP:r,isStorageUP:l,loading:!1});case 13:case"end":return e.stop()}},e)})),a.onChange=function(e,t){var n;a.setState((n={},Object(f.a)(n,t,e.target.value),Object(f.a)(n,"errors",[]),n))},a.onClickInstanceValidation=Object(s.a)(c.a.mark(function e(){var t,n,r,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({instanceLoading:!0}),e.next=3,ie(a.state.instanceId);case 3:t=e.sent,n=t.isValid,r=t.error,l=t.url,n?(G(l),a.getInitialData()):a.setState({instanceLoading:!1,instanceURL:null,isInstanceSet:!1,loading:!1,errors:r});case 8:case"end":return e.stop()}},e)})),a.onClickLogin=Object(s.a)(c.a.mark(function e(){var t,n,r,l,i,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.username,r=t.password,a.setState({loading:!0}),e.next=4,oe(n,r);case 4:l=e.sent,i=l.loginStatus,o=l.error,i?(Y(n,r),a.setState({loading:!1}),V()):a.setState({loading:!1,errors:o});case 8:case"end":return e.stop()}},e)})),a._renderForm=function(){var e=a.state,t=e.loading,n=e.errors,l=e.isInstanceSet,i=e.isDatabaseUP,o=e.isStorageUP,c=e.instanceLoading,s=!O.a.isEmpty(n);return r.a.createElement(C.a,{className:"login-card w-100"},r.a.createElement(C.a.Content,null,r.a.createElement("div",{className:"content-middle-container"},r.a.createElement("div",{className:"logo-container"},r.a.createElement("img",{style:{height:75,width:75},alt:"Lazarus Deployer",src:N.a})),r.a.createElement(C.a.Header,null,r.a.createElement(P,null)),r.a.createElement(v.a,{className:"alert-message-login ".concat(s?"":"invisible"),negative:!0},r.a.createElement("p",null,n.join(","))),r.a.createElement(C.a.Description,null,l?r.a.createElement(b.a,{autoComplete:"off"},r.a.createElement(b.a.Input,{onChange:function(e){return a.onChange(e,"username")},label:"Username",name:"username",type:"text"}),r.a.createElement(b.a.Input,{onChange:function(e){return a.onChange(e,"password")},label:"Password",name:"password",type:"password"}),r.a.createElement(b.a.Field,null,r.a.createElement(w.a,{label:"Remember Me"})),r.a.createElement(y.a,{loading:t,onClick:function(){return a.onClickLogin()},type:"submit"},"Login")):r.a.createElement(b.a,null,r.a.createElement(b.a.Input,{onChange:function(e){return a.onChange(e,"instanceId")},label:"Instance URL",loading:t,name:"instance",type:"text"}),r.a.createElement(y.a,{loading:c,onClick:function(){return a.onClickInstanceValidation()},type:"submit"},"Set"))))),r.a.createElement(C.a.Content,{extra:!0},r.a.createElement("div",{className:"content-middle-container content-extra"},r.a.createElement("div",{className:"login-service-info flex-row flex-jc-sb"},r.a.createElement(k.a,{trigger:r.a.createElement("div",{className:"flex-row"},r.a.createElement("div",null,ge(!!l||null)),r.a.createElement("a",{href:!0},"Deployer Server")),content:"Server endpoint ".concat(i?H():"is not set"),inverted:!0}),r.a.createElement(k.a,{trigger:r.a.createElement("div",{className:"flex-row"},r.a.createElement("div",null,ge(!!i||null)),r.a.createElement("a",{href:!0},"Database")),content:"Database service ".concat(i?"is up":"disconnected"),inverted:!0}),r.a.createElement(k.a,{trigger:r.a.createElement("div",{className:"flex-row"},r.a.createElement("div",null,ge(!!o||null)),r.a.createElement("a",{href:!0},"Storage")),content:"Storage service ".concat(o?"is up":"disconnected"),inverted:!0})))))},a._renderComponents=function(){var e=a.state,t=e.dbHealth,n=e.storageHealth,l=e.isStorageUP,i=e.isDatabaseUP,o=e.isInstanceSet,c=e.loading,s={dbHealth:t,storageHealth:n,onClickRetry:V,onClickDisconnect:function(){B(),V()}},u=!1;return o&&(i&&l||(u=!0)),c&&!o?ye():r.a.createElement(S.a,{stretched:!0,columns:3,verticalAlign:"middle",className:"grid-full-height"},r.a.createElement(S.a.Row,null,r.a.createElement(S.a.Column,null),r.a.createElement(S.a.Column,null,u?De(s):a._renderForm()),r.a.createElement(S.a.Column,null)))},a.state={instanceLoading:!1,dbHealth:{},storageHealth:{},isDatabaseUP:!1,isStorageUP:!1,loading:!0,instanceId:null,username:"",password:"",errors:[]},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getInitialData()}},{key:"render",value:function(){return r.a.createElement("div",{className:"login-main-container"},this._renderComponents())}}]),t}(n.Component),Pe=a(430),Ie=a(416),Ne=x.ACTIONS,Te=K().username,je=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e)))._getIntitalData=Object(s.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(Ne.GET_LOGS);case 2:t=e.sent,t=O.a.get(t,"data.rows",[]),a.setState({loading:!1,logsData:t});case 5:case"end":return e.stop()}},e)})),a.handleItemClick=function(e,t){var n=t.name;a.setState({activeItem:n}),"logout"===n&&(z(),a.props.setAppLoader(!0),V()),"disconnect"===n&&(z(),B(),a.props.setAppLoader(!0),V())},a.state={loading:!1,activeItem:"home",logsData:[]},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getIntitalData();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.logsData;return r.a.createElement(Pe.a,{secondary:!0,className:"navigation-bar"},r.a.createElement(Pe.a.Item,null,r.a.createElement("img",{style:{height:45,width:45},alt:"Message",src:N.a})),r.a.createElement(Pe.a.Item,null,r.a.createElement(P,{size:1.5})),r.a.createElement(Pe.a.Menu,{position:"right"},r.a.createElement(Ie.a,{pointing:"right top",scrolling:!0,item:!0,text:r.a.createElement("div",null,Ee("success",r.a.createElement(se.a,{name:"bell outline"})))},r.a.createElement(Ie.a.Menu,null,e.map(function(e,t){return r.a.createElement(Ie.a.Item,{key:t},(a=e.step,n=e.source,l=e.status,i=function(e){if(e){var t=e.split(" ");e=(t[0]||"-")+(t[1][0]||"-")+" "+(t[2]||"-")}else e="Just now";return e}(i=e.eta),r.a.createElement("div",{className:"list-item-row task-row"},r.a.createElement("div",{className:"flex-row flex-jc-sb w-100"},Ee(l,r.a.createElement("b",null,a)),r.a.createElement("div",{className:"flex-row"},r.a.createElement("div",null,Z(n)),r.a.createElement("div",{className:"task-list-eta"},i))))));var a,n,l,i}),r.a.createElement(de.a,null),r.a.createElement(Ie.a.Item,{name:"navigate-activities",text:r.a.createElement("div",null,r.a.createElement("a",{href:!1},"View Details")),onClick:this.handleItemClick}))),r.a.createElement(Ie.a,{item:!0,text:r.a.createElement("div",null,r.a.createElement(se.a,{name:"user outline"})," ",r.a.createElement("span",null,Te))},r.a.createElement(Ie.a.Menu,null,r.a.createElement(Ie.a.Item,{icon:"setting",text:"Settings"}),r.a.createElement(Ie.a.Item,{icon:"unlinkify",name:"disconnect",text:"Disconnect",onClick:this.handleItemClick}),r.a.createElement(Ie.a.Item,{icon:"shutdown",name:"logout",text:"Logout",onClick:this.handleItemClick})))))}}]),t}(n.Component),_e=(a(284),a(285),a(22)),Ae=a(20),Le=a(431),Re=a(117),Ue=a(425),He=a(225),Ge=(a(48),x.ACTIONS),Be=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).healthPanel=function(e){var t=e.storageData,n=a.constants.storageThreshold,l=[],i=!0;t.percent_used>n&&(l.push("Storage used beyond ".concat(n,"%")),i="warning");var o=l.length>0?"warning":"good",c=l.map(function(e){return r.a.createElement("div",{className:"flex-row pt-10"},r.a.createElement(se.a,{className:"custom-icon yellow",name:"warning circle"}),r.a.createElement("div",null,e))});return r.a.createElement(C.a,{fluid:!0},r.a.createElement(C.a.Content,{className:"flex-grow-unset",header:Se("Health")}),r.a.createElement(C.a.Content,{description:r.a.createElement("div",null,r.a.createElement("div",{className:"flex-row flex-jc-c"},pe(o)),r.a.createElement(de.a,null),r.a.createElement(ue.a,null,r.a.createElement(ue.a.Item,null,be("Cluster",Ee(!0)),be("Storage",Ee(i)),be("Parity",Ee(!0))),r.a.createElement(de.a,null),r.a.createElement(ue.a.Item,null,r.a.createElement(ue.a.Header,null,"Alerts"),l.length>0?c:r.a.createElement("div",{className:"flex-row flex-jc-c mt-50"},r.a.createElement("div",null,r.a.createElement(se.a,{className:"custom-icon gray",name:"bell outline",size:"huge"}),r.a.createElement("div",{className:"mt-10"},"No Alerts"))))))}))},a.dropboxPanel=function(){var e=a.state.storageData,t=e.type,n=e.username,l=e.percent_available,i=e.percent_used,o=e.email,c=e.used_space,s=e.total_space,u=e.filesData,d=O.a.get(u,"files",[]),m={labels:["Used","Available"],datasets:[{label:"# of Votes",data:[i,l],backgroundColor:["rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)"],borderColor:["rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)"],borderWidth:1}]},h=function(e,t){return r.a.createElement("div",{className:"list-item-row"},r.a.createElement("div",null,e),r.a.createElement("div",null,t))};return r.a.createElement(C.a,{fluid:!0},r.a.createElement(C.a.Content,{className:"flex-grow-unset",header:Se("Storage")}),r.a.createElement(C.a.Content,{description:r.a.createElement("div",null,r.a.createElement("div",{className:"card-chart-container"},r.a.createElement(He.a,{options:{plugins:{legend:!1}},data:m})),r.a.createElement("div",null,"Available ".concat(l,"%")),r.a.createElement(de.a,null),r.a.createElement(ue.a,null,r.a.createElement(ue.a.Item,null,r.a.createElement(ue.a.Header,null,r.a.createElement("div",{className:"flex-row flex-jc-sb w-100"},r.a.createElement("div",null,"Account"),r.a.createElement("div",null,r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://www.dropbox.com/login?email=".concat(o)},"Login")))),h("Email",o),h("Username",n),h("Type",Z(t))),r.a.createElement(de.a,null),r.a.createElement(ue.a.Item,null,r.a.createElement(ue.a.Header,null,"Stats"),h("Used/Available","".concat(c,"/").concat(s))),r.a.createElement(de.a,null),r.a.createElement(ue.a.Item,null,r.a.createElement(ue.a.Header,null,"File System"),h("Files Hosted",d.length))))}))},a.hostingPanel=function(){var e=a.state.dbData,t=e.dbReference,n=e.dbList,l=O.a.get(n,"rows",[]),i=O.a.get(t,"credentials",[]),o=function(e,t){return r.a.createElement("div",{className:"list-item-row"},r.a.createElement("div",null,e),r.a.createElement("div",null,t))};return r.a.createElement(C.a,{fluid:!0},r.a.createElement(C.a.Content,{className:"flex-grow-unset",header:Se("Hosting")}),r.a.createElement(C.a.Content,{description:r.a.createElement("div",null,r.a.createElement("div",{className:"hosting-name flex-row"},r.a.createElement("div",{className:"domain"},U().split(".")[0]),r.a.createElement("div",{className:"ext"},".".concat(U().split(".")[1]))),r.a.createElement(de.a,null),r.a.createElement(ue.a,null,r.a.createElement(ue.a.Item,null,r.a.createElement(ue.a.Header,null,r.a.createElement("div",{className:"flex-row flex-jc-sb w-100"},r.a.createElement("div",null,"Database"),r.a.createElement("div",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"".concat(R(),"/adminer.php?username=").concat(i.username,"&db=").concat(i.database)},"Login")))),o("Host",i.host),o("Deployer Database",i.database),o("Username",i.username),o("Password",i.password),o("Databases",l.length),o("Tables",l.length))))}))},a.CardPanels=function(){var e=a._statsBackup(),t=e.el,n=e.versioned,l=e.lkg,i=[{header:r.a.createElement(Le.a,{className:"header-with-label",size:"medium"},"Backups",r.a.createElement(Re.a,null,l)),description:t,meta:"Created on storage",key:1},{header:r.a.createElement(Le.a,{className:"header-with-label",size:"medium"},"LKG Builds ",r.a.createElement(Re.a,null,l)),description:a._statsLKG(),meta:"",key:2},{header:r.a.createElement(Le.a,{className:"header-with-label",size:"medium"},"Versioned Builds ",r.a.createElement(Re.a,null,n)),description:a._statsVersioned(),meta:"",key:3}];return r.a.createElement(C.a.Group,{className:"dashboard-cards-group",items:i})},a._statsBackup=function(){for(var e=a.state.backupData,t=[],n=[],l=[],i=0,o=Object.entries(e);i<o.length;i++){var c=o[i],s=Object(_e.a)(c,2)[1];t=t.concat(s);var u=s.filter(function(e){return e.name.includes(".FN.")})||[],d=s.filter(function(e){return!e.name.includes(".FN.")})||[];n=n.concat(u),l=l.concat(d)}return{el:r.a.createElement(Ue.a.Group,{horizontal:!0},r.a.createElement(Ue.a,null,r.a.createElement(Ue.a.Value,null,t.length),r.a.createElement(Ue.a.Label,null,"Total"))),versioned:n.length,lkg:l.length,all:t.length}},a._statsVersioned=function(){for(var e=a.state.backupData,t=[],n=0,l=Object.entries(e);n<l.length;n++){var i=l[n],o=Object(_e.a)(i,2),c=o[0],s=o[1].filter(function(e){return e.name.includes(".FN.")})||[];t.push({dirName:c,lastBackup:O.a.get(O.a.last(s),"eta","-")})}return r.a.createElement(ue.a,{divided:!0,relaxed:!0},t.map(function(e){return r.a.createElement(ue.a.Item,{key:e.dirName},r.a.createElement(ue.a.Icon,{name:"hdd outline",size:"large",verticalAlign:"middle"}),r.a.createElement(ue.a.Content,null,r.a.createElement(ue.a.Header,{as:"a"},e.dirName),r.a.createElement(ue.a.Description,{as:"a"},e.lastBackup)))}))},a._statsLKG=function(){for(var e=a.state.backupData,t=[],n=0,l=Object.entries(e);n<l.length;n++){var i=l[n],o=Object(_e.a)(i,2),c=o[0],s=o[1].filter(function(e){return!e.name.includes(".FN.")})||[];t.push({dirName:c,lastBackup:O.a.get(O.a.last(s),"eta","-")})}return r.a.createElement(ue.a,{divided:!0,relaxed:!0},t.map(function(e){return r.a.createElement(ue.a.Item,{key:e.dirName},r.a.createElement(ue.a.Icon,{name:"code branch",size:"large",verticalAlign:"middle"}),r.a.createElement(ue.a.Content,null,r.a.createElement(ue.a.Header,{as:"a"},e.dirName),r.a.createElement(ue.a.Description,{as:"a"},e.lastBackup)))}))},a._renderPage=function(){var e=a.state,t=e.loading,n=e.loadingPercentage,l={storageData:e.storageData};return t?we(n):r.a.createElement(S.a,{className:"dashboard-grid-layout",stretched:!0,columns:4},r.a.createElement(S.a.Row,null,r.a.createElement(S.a.Column,null,a.healthPanel(l)),r.a.createElement(S.a.Column,null,a.dropboxPanel()),r.a.createElement(S.a.Column,null,a.CardPanels()),r.a.createElement(S.a.Column,null,a.hostingPanel())))},a.constants={storageThreshold:50},a.state={loadingPercentage:0,loading:!0,backupData:{},storageData:{},dbData:{}},a.updateLoadingProgress=te.bind(Object(Ae.a)(Object(Ae.a)(a))),a.progressContinue=ae.bind(Object(Ae.a)(Object(Ae.a)(a))),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(c.a.mark(function e(){var t,a,n,r=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.timer=setInterval(function(){return r.progressContinue()},50),e.next=3,le(Ge.BACKUP_STATUS);case 3:return t=e.sent,this.updateLoadingProgress(35),e.next=7,le(Ge.STORAGE_STATUS);case 7:return a=e.sent,this.updateLoadingProgress(60),e.next=11,le(Ge.DB_STATUS);case 11:n=e.sent,this.updateLoadingProgress(100),clearInterval(this.timer),t=O.a.get(t,"data.data",{}),a=O.a.get(a,"data",{}),n=O.a.get(n,"data",{}),this.setState({loading:!1,backupData:t,storageData:a,dbData:n});case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){return this._renderPage()}}]),t}(n.Component),Me=a(28),We=a(418),Fe=a(420),Ye=a(414),Ke=a(85),ze=a(42),Ve=x.ACTIONS,Je=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={open:!1,loadingContentOptions:!0,tunnelSchema:[],errors:[]},a.onChange=function(e,t){var n,r,l=e.target.value,i=Object(_.a)({},a.state),o={};switch(t){case"entity":n={},Object(f.a)(n,t,l),Object(f.a)(n,"remote_path","".concat(l.toUpperCase(),"_BACKUP")),o=n,i=O.a.extend(i,o),a.setState(i);break;default:a.setState((r={},Object(f.a)(r,t,l),Object(f.a)(r,"errors",[]),r))}},a.onLocalPathChange=function(e){var t=e.target.value;a.setState({local_path:t,contentOptions:[],loadingContentOptions:!0});O.a.debounce(function(e){!function(e){a.setContents(e)}(e)},700)(t)},a.onSelectChange=function(e,t){var n;a.setState((n={},Object(f.a)(n,t,e),Object(f.a)(n,"errors",[]),n))},a.fetchPaths=function(){var e=Object(s.a)(c.a.mark(function e(t){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(Ve.GET_DIR_CONTENTS,{path:t});case 2:return a=e.sent,a=O.a.get(a,"data.contents",[]),e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.setContents=function(){var e=Object(s.a)(c.a.mark(function e(t){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(Ve.GET_DIR_CONTENTS,{path:t});case 2:n=e.sent,n=O.a.get(n,"data.contents",[]),a.setState({contentOptions:n,loadingContentOptions:!1});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.setOpen=Object(s.a)(c.a.mark(function e(){var t,n,r,l,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(Ve.SCHEMA,{table:"tunnels"});case 2:return t=e.sent,e.next=5,a.fetchPaths("");case 5:n=e.sent,t=O.a.get(t,"data.columns",[]),r=["type"],t=O.a.remove(t,function(e){return!r.includes(e)}),l={},t.forEach(function(e){var t=null;"local_path"===e&&(t=""),"contents"===e&&(t=[]),l=O.a.extend(l,Object(f.a)({},e,t))}),i=O.a.extend(l,{loading:!1,loadingContentOptions:!1,contentOptions:n,tunnelSchema:t,open:!0}),a.setState(i);case 13:case"end":return e.stop()}},e)})),a.setClose=function(){a.setState({open:!1})},a.handleSubmit=Object(s.a)(c.a.mark(function e(){var t,n,r,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.tunnelSchema,n={},t.forEach(function(e){var t=e,r=O.a.get(a.state,e,"");"contents"===e&&(r=(r=O.a.get(a.state,e,[])).join(",")),n=O.a.extend(n,Object(f.a)({},t,r))}),e.next=5,le(Ve.ADD_TUNNEL,n);case 5:r=e.sent,"success"===(r=O.a.get(r,"data",{})).status?(a.setClose(),a.props.refreshTable(),Q(r.message)):((l=[]).push(X(O.a.get(r,"error",""))),a.setState({errors:l}));case 8:case"end":return e.stop()}},e)})),a._inputContentsDropdown=function(){var e=a.state.contentOptions.map(function(e){return{key:e.name,text:e.name,value:e.name}});return r.a.createElement(Ie.a,{placeholder:"All Content",value:a.state.contents,fluid:!0,multiple:!0,loading:a.state.loadingContentOptions,selection:!0,onChange:function(e,t){var n=t.value;return a.onSelectChange(n,"contents")},options:e})},a._populateFormFields=function(){var e=a.state,t=e.tunnelSchema,n=e.contentOptions,l=e.local_path,i=e.loadingContentOptions;return t.map(function(e){switch(e){case"contents":return r.a.createElement(b.a.Field,null,r.a.createElement("label",null,J(e)),a._inputContentsDropdown());case"local_path":return r.a.createElement(b.a.Field,null,r.a.createElement("label",null,J(e)),r.a.createElement(Ye.a,{loading:i,list:"paths",label:"/",placeholder:J(e),onChange:function(e){return a.onLocalPathChange(e)},value:a.state[e]}),r.a.createElement("datalist",{id:"paths"},n.map(function(e){return"folder"===e.tag?r.a.createElement("option",{value:$("".concat(l,"/").concat(e.name),"/")}):null})));default:return r.a.createElement(b.a.Field,null,r.a.createElement("label",null,J(e)),r.a.createElement("input",{placeholder:J(e),onChange:function(t){return a.onChange(t,e)},value:a.state[e]}))}})},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(ze.a,{className:"fullpage-modal",closeOnDimmerClick:!1,animation:"fade up",duration:200,onClose:function(){return e.setClose()},onOpen:function(){return e.setOpen()},open:this.state.open,trigger:this.props.trigger},r.a.createElement(Ke.a.Header,null,Ce("Create Tunnel",this.setClose)),r.a.createElement(Ke.a.Content,null,r.a.createElement(Ke.a.Description,null,r.a.createElement("div",{className:"add-form-body w-50"},r.a.createElement(b.a,{error:!0},r.a.createElement(v.a,{className:this.state.errors.length>0?"alert visible":"alert invisible",error:!0,header:"Failed",content:this.state.errors.join(". ")}),this._populateFormFields())))),r.a.createElement(Ke.a.Actions,null,r.a.createElement(y.a,{onClick:function(){return e.setClose()}},"Cancel"),r.a.createElement(y.a,{content:"Submit",onClick:function(){return e.handleSubmit()},positive:!0})))}}]),t}(n.Component);function Xe(e){var t=e.trigger,a=e.execute,n=e.selectedEntities,l=r.a.useState(!1),i=Object(_e.a)(l,2),o=i[0],c=i[1];return r.a.createElement(ze.a,{closeOnDimmerClick:!1,animation:"fade up",duration:200,onClose:function(){return c(!1)},onOpen:function(){return c(!0)},open:o,trigger:t},r.a.createElement(Ke.a.Header,null,"Delete Tunnel"),r.a.createElement(Ke.a.Content,{image:!0},r.a.createElement(Ke.a.Description,null,r.a.createElement(v.a,{warning:!0},r.a.createElement(v.a.Header,null,"You must register before you can do that!"),r.a.createElement("p",null,"Visit our registration page, then try again.")),r.a.createElement("p",null,"Are you sure you want delete ",r.a.createElement("b",null,n.join(", "))," ?"))),r.a.createElement(Ke.a.Actions,null,r.a.createElement(y.a,{onClick:function(){return c(!1)}},"Cancel"),r.a.createElement(y.a,{onClick:function(){c(!1),a()},negative:!0},"Delete")))}function qe(e){var t=e.trigger,a=e.execute,n=e.selectedEntities,l=r.a.useState(!1),i=Object(_e.a)(l,2),o=i[0],c=i[1];return r.a.createElement(ze.a,{closeOnDimmerClick:!1,animation:"fade up",duration:200,onClose:function(){return c(!1)},onOpen:function(){return c(!0)},open:o,trigger:t},r.a.createElement(Ke.a.Header,null,"Revoke Tunnel"),r.a.createElement(Ke.a.Content,{image:!0},r.a.createElement(Ke.a.Description,null,r.a.createElement("p",null,"Are you sure you want revoke ",r.a.createElement("b",null,n.join(", "))," ?"))),r.a.createElement(Ke.a.Actions,null,r.a.createElement(y.a,{onClick:function(){return c(!1)}},"Cancel"),r.a.createElement(y.a,{onClick:function(){c(!1),a()},negative:!0},"Revoke")))}var Ze=a(413),$e={EMPTY:"empty",DELETE:"delete",INTACT:"intact"},Qe={EMPTY:Z($e.EMPTY),DELETE:Z($e.DELETE),INTACT:Z($e.INTACT)};function et(e){var t=e.trigger,a=e.execute,n=e.selectedEntities,l=e.data,i=r.a.useState(!1),o=Object(_e.a)(i,2),c=o[0],s=o[1],u=r.a.useState($e.INTACT),d=Object(_e.a)(u,2),m=d[0],h=d[1],g=r.a.useState($e.INTACT),p=Object(_e.a)(g,2),E=p[0],f=p[1],w=r.a.useState(""),C=Object(_e.a)(w,2),S=C[0],D=C[1],x=function(e,t){var a=t.value;return h(a)},P=function(e,t){var a=t.value;return f(a)},I=n.join(", "),N=I.toUpperCase(),T=O.a.find(l,function(e){return e.entity===I}),j=function(e){switch(e){case $e.DELETE:return"red";case $e.EMPTY:return"blink blue";default:return"green"}},_=function(e){var t="",a={info:!0};switch(e){case $e.DELETE:t="This will delete the directory and it's contents",a={negative:!0};break;case $e.EMPTY:t="This will only delete the contents of the directory",a={info:!0};break;default:t="This will leave the endpoint intact",a={positive:!0}}return r.a.createElement(v.a,a,t)};return r.a.createElement(ze.a,{className:"tunnel-purge-modal",closeOnDimmerClick:!1,animation:"fade up",duration:200,onClose:function(){return s(!1)},onOpen:function(){return s(!0)},open:c,trigger:t},r.a.createElement(Ke.a.Header,null,"Purge Tunnel"),r.a.createElement(Ke.a.Content,null,r.a.createElement(Ke.a.Description,null,r.a.createElement(he.a.Group,{horizontal:!0,className:"main-segment"},r.a.createElement(he.a,null,r.a.createElement("label",null,"Storage Endpoint"),r.a.createElement("div",{className:"icon-container"},r.a.createElement(k.a,{content:function(e){var t=O.a.get(e,"remote_path"),a=O.a.get(e,"remote_contents_list",[]);if(O.a.isEmpty(a))return r.a.createElement("div",null,"Remote endpoint has not contents");switch(m){case $e.DELETE:return a.map(function(e){return r.a.createElement("div",{className:"to-be-deleted"},"/".concat(t,"/").concat(e.name))});case $e.EMPTY:return a.map(function(e){return r.a.createElement("div",{className:"not-to-be-deleted"},"/".concat(t,"/"),r.a.createElement("span",{className:"to-be-deleted"},"".concat(e.name)))});default:return a.map(function(e){return r.a.createElement("div",{className:"not-to-be-deleted"},"/".concat(t,"/").concat(e.name))})}}(T),trigger:r.a.createElement(se.a,{className:"".concat(j(m)),size:"huge",disabled:!0,name:"server"})})),r.a.createElement(b.a,null,r.a.createElement("label",null,"Operation"),r.a.createElement(de.a,null),r.a.createElement(b.a.Group,{inline:!0},r.a.createElement(b.a.Field,{control:Ze.a,label:Qe.DELETE,value:$e.DELETE,checked:m===$e.DELETE,onChange:x}),r.a.createElement(b.a.Field,{control:Ze.a,label:Qe.EMPTY,value:$e.EMPTY,checked:m===$e.EMPTY,onChange:x}),r.a.createElement(b.a.Field,{control:Ze.a,label:Qe.INTACT,value:$e.INTACT,checked:m===$e.INTACT,onChange:x})),_(m))),r.a.createElement(he.a,null,r.a.createElement("label",null,"Hosting Endpoint"),r.a.createElement("div",{className:"icon-container"},r.a.createElement(k.a,{content:function(e){var t=O.a.get(e,"local_path"),a=O.a.get(e,"contents_list",[]);if(O.a.isEmpty(a))return r.a.createElement("div",null,"Local endpoint has not contents");switch(E){case $e.DELETE:return a.map(function(e){return r.a.createElement("div",{className:"to-be-deleted"},"/".concat(t,"/").concat(e))});case $e.EMPTY:return a.map(function(e){return r.a.createElement("div",{className:"not-to-be-deleted"},"/".concat(t,"/"),r.a.createElement("span",{className:"to-be-deleted"},"".concat(e)))});default:return a.map(function(e){return r.a.createElement("div",{className:"not-to-be-deleted"},"/".concat(t,"/").concat(e))})}}(T),trigger:r.a.createElement(se.a,{disabled:!0,className:"".concat(j(E)),size:"huge",name:"folder outline"})})),r.a.createElement(b.a,null,r.a.createElement("label",null,"Operation"),r.a.createElement(de.a,null),r.a.createElement(b.a.Group,{inline:!0},r.a.createElement(b.a.Field,{control:Ze.a,label:Qe.DELETE,value:$e.DELETE,checked:E===$e.DELETE,onChange:P}),r.a.createElement(b.a.Field,{control:Ze.a,label:Qe.EMPTY,value:$e.EMPTY,checked:E===$e.EMPTY,onChange:P}),r.a.createElement(b.a.Field,{control:Ze.a,label:Qe.INTACT,value:$e.INTACT,checked:E===$e.INTACT,onChange:P})),_(E)))))),r.a.createElement(Ke.a.Actions,{className:"flex-row flex-jc-sb"},r.a.createElement(Ye.a,{onChange:function(e,t){var a=t.value;return D(a)},value:S,placeholder:I.toUpperCase()}),r.a.createElement("div",null,r.a.createElement(y.a,{onClick:function(){return s(!1)}},"Cancel"),r.a.createElement(y.a,{disabled:N!==S,onClick:function(){s(!1),a({local_action:E,remote_action:m})},negative:!0},"Purge"))))}var tt=x.ACTIONS,at="Tunnel",nt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).setLoading=function(e){a.setState({loading:e})},a._getIntitalData=Object(s.a)(c.a.mark(function e(){var t,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.timer=setInterval(function(){return a.progressContinue()},25),e.next=3,le(tt.GET_TUNNELS,{status:!0});case 3:t=e.sent,t=O.a.get(t,"data.rows",[]),a.updateLoadingProgress(90),clearInterval(a.timer),n=t,a.setState({loading:!1,tunnelsData:t,tunnelsDataSource:n,selectedEntities:[]}),a.handlePaginationChange(null,{activePage:1});case 10:case"end":return e.stop()}},e)})),a.handlePaginationChange=function(e,t){for(var n=t.activePage,r=Object(_.a)({},a.state).tunnelsDataSource,l=[],i=(n-1)*a.tableRowLength;i<=n*a.tableRowLength-1;i++)i<r.length&&l.unshift(r[i]);l=O.a.sortBy(l,function(e){return e.entity}),a.setState({tunnelsData:l,activePage:n})},a.onChangeSearch=function(e){var t=e.target.value,n=a.state.tunnelsDataSource,r=O.a.filter(n,function(e){return e.entity.includes(t)});a.setState({tunnelsData:r,errors:[]})},a.handleDeleteAction=Object(s.a)(c.a.mark(function e(){var t,n,r,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.selectedEntities,n=O.a.first(t),a.setLoading(!0),e.next=5,le(tt.DELETE_TUNNEL,{entity:n});case 5:return r=e.sent,r=O.a.get(r,"data",{}),l=O.a.get(r,"message","Deletion failed"),"success"===r.status?Q(l):ee(l),e.next=11,a._getIntitalData();case 11:case"end":return e.stop()}},e)})),a.handleRevokeAction=Object(s.a)(c.a.mark(function e(){var t,n,r,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.selectedEntities,n=O.a.first(t),a.setLoading(!0),e.next=5,le(tt.REVOKE_TUNNEL,{entity:n});case 5:return r=e.sent,r=O.a.get(r,"data",{}),l=O.a.get(r,"message","Revoke failed"),"success"===r.status?Q(l):ee(l),e.next=11,a._getIntitalData();case 11:case"end":return e.stop()}},e)})),a.handlePurgeAction=Object(s.a)(c.a.mark(function e(){var t,n,r,l,i,o,s=arguments;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},n=a.state.selectedEntities,r=O.a.first(n),a.setLoading(!0),l=O.a.extend({entity:r},t),e.next=8,le(tt.PURGE_TUNNEL,l);case 8:return i=e.sent,i=O.a.get(i,"data",{}),o=O.a.get(i,"message","Revoke failed"),"success"===i.status?Q(o):ee(o),e.next=14,a._getIntitalData();case 14:case"end":return e.stop()}},e)})),a.handleSelect=function(e){var t=Object(_.a)({},a.state).selectedEntities;O.a.includes(t,e)?t=O.a.remove(t,function(t){return t!==e}):t.push(e),a.setState({selectedEntities:t})},a._formatContents=function(e){return ve(e.split(","))},a._formatPathStatus=function(e,t,a){return t?a?r.a.createElement("div",{className:"flex-row flex-jc-sb"},r.a.createElement("div",null,"/".concat(e)),r.a.createElement(k.a,{content:"This directory is empty",trigger:r.a.createElement(se.a,{className:"blue cursor-link",name:"warning circle"})})):"/".concat(e):r.a.createElement("div",{className:"flex-row flex-jc-sb"},r.a.createElement("div",null,"/".concat(e)),r.a.createElement(k.a,{content:"This directory does not exist",trigger:r.a.createElement(se.a,{className:"yellow cursor-link",name:"warning circle"})}))},a._renderTable=function(e){var t=[{width:1,header:"",dataPath:["entity"],formatter:function(e){return r.a.createElement(w.a,{name:e,onChange:function(){return a.handleSelect(e)},checked:O.a.includes(a.state.selectedEntities,e)})}},{width:4,header:"Entity",dataPath:["entity","type"],formatter:function(e,t){return"default"===t?r.a.createElement("div",null,Z(e),r.a.createElement(Re.a,{className:"ml-5",as:"a",basic:!0,color:"blue"},Z(t))):Z(e)}},{width:2,header:"Hosting Endpoint",dataPath:["local_path","local_status","is_local_empty"],formatter:a._formatPathStatus},{width:4,header:"Storage Endpoint",dataPath:["remote_path","remote_status","is_remote_empty"],formatter:a._formatPathStatus},{width:2,header:"Contents",dataPath:["contents"],formatter:a._formatContents}],n=e.map(function(e){return t.map(function(t){var a=O.a.get(t,"formatter",null);if(a)try{var n=t.dataPath.map(function(t){return"[object]"===t?e:O.a.get(e,t,"-")});return a.apply(void 0,Object(Me.a)(n))}catch(r){return a||"-"}return O.a.get(e,t.dataPath[0],"-")})});return O.a.isEmpty(e)?we(a.state.loadingPercentage):r.a.createElement("div",null,r.a.createElement("div",{className:"w-100 flex-row flex-jc-fe pt-10"},r.a.createElement(We.a,{firstItem:null,lastItem:null,activePage:a.state.activePage,onPageChange:a.handlePaginationChange,totalPages:Math.ceil(a.state.tunnelsDataSource.length/a.tableRowLength)})),r.a.createElement(Fe.a,{celled:!0},r.a.createElement(Fe.a.Header,null,r.a.createElement(Fe.a.Row,null,t.map(function(e){return r.a.createElement(Fe.a.HeaderCell,{width:e.width},e.header)}))),r.a.createElement(Fe.a.Body,null,n.map(function(e){return r.a.createElement(Fe.a.Row,null,e.map(function(e){return r.a.createElement(Fe.a.Cell,null,e)}))}))))},a._renderTableMessage=function(e){var t=a.state.loading,n=r.a.createElement("p",null,"Viewing all ",e.length," ",at);return t&&(n=r.a.createElement("p",null,r.a.createElement(se.a,{name:"circle notched blue",loading:!0}),q())),r.a.createElement(v.a,null,n)},a._renderPage=function(){var e=a.state,t=e.tunnelsData,n=e.tunnelsDataSource,l=e.selectedEntities;return r.a.createElement(he.a.Group,null,r.a.createElement(Le.a,{as:"h5",attached:"top"},r.a.createElement("div",null,at)),r.a.createElement(he.a,null,r.a.createElement("div",{className:"flex-row flex-jc-sb w-100"},r.a.createElement("div",null,r.a.createElement(Je,{refreshTable:a._getIntitalData,trigger:r.a.createElement(y.a,{icon:!0,labelPosition:"right",primary:!0},r.a.createElement(se.a,{name:"add"}),"Create ".concat(at))}),r.a.createElement(Ie.a,{disabled:1!==l.length,button:!0,text:"Actions"},r.a.createElement(Ie.a.Menu,{closeOnBlur:!0,closeOnChange:!0},r.a.createElement(Xe,{execute:a.handleDeleteAction,selectedEntities:l,trigger:r.a.createElement(Ie.a.Item,{disabled:1!==l.length,text:"Delete"})}),r.a.createElement(qe,{execute:a.handleRevokeAction,selectedEntities:l,trigger:r.a.createElement(Ie.a.Item,{disabled:1!==l.length,text:"Revoke"})}),r.a.createElement(et,{data:n,execute:a.handlePurgeAction,selectedEntities:l,trigger:r.a.createElement(Ie.a.Item,{disabled:1!==l.length,text:"Purge"})}),r.a.createElement(Ie.a.Item,{disabled:1!==l.length,text:"Update"})))),r.a.createElement(Ye.a,{icon:"search",onChange:function(e){return a.onChangeSearch(e)},placeholder:"Search..."})),a._renderTableMessage(n)),r.a.createElement(he.a,{className:"table-segment"},a._renderTable(t)))},a.tableRowLength=5,a.state={activePage:1,value:1,loading:!0,tunnelsData:[],tunnelsDataSource:[],selectedEntities:[],loadingPercentage:10},a.updateLoadingProgress=te.bind(Object(Ae.a)(Object(Ae.a)(a))),a.progressContinue=ae.bind(Object(Ae.a)(Object(Ae.a)(a))),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getIntitalData();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){return this._renderPage()}}]),t}(n.Component),rt=x.ACTIONS,lt="Activities",it=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).markLoadingProgress=function(e){a.setState({loadingPercentage:e})},a._getIntitalData=Object(s.a)(c.a.mark(function e(){var t,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(rt.GET_LOGS);case 2:t=e.sent,t=O.a.get(t,"data.rows",[]),a.markLoadingProgress(90),n=t,a.setState({loading:!1,logsData:t,logsDataSource:n,selectedEntities:[]}),a.handlePaginationChange(null,{activePage:1});case 8:case"end":return e.stop()}},e)})),a.handlePaginationChange=function(e,t){for(var n=t.activePage,r=Object(_.a)({},a.state).logsDataSource,l=[],i=(n-1)*a.tableRowLength;i<=n*a.tableRowLength-1;i++)i<r.length&&l.unshift(r[i]);a.setState({logsData:l,activePage:n})},a.handleConfirm=function(e){a.setState({showConfirm:e})},a.handleConfirmAction=Object(s.a)(c.a.mark(function e(){var t,n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.selectedEntities,n=O.a.first(t),e.next=4,le(rt.DELETE_USER,{target_username:n});case 4:return r=e.sent,Q(O.a.get(r,"message","Deletion failed")),a.handleConfirm(!1),e.next=9,a._getIntitalData();case 9:case"end":return e.stop()}},e)})),a.handleSelect=function(e){var t=Object(_.a)({},a.state).selectedEntities;O.a.includes(t,e)?t=O.a.remove(t,function(t){return t!==e}):t.push(e),a.setState({selectedEntities:t})},a._formatTimeStamp=function(e,t){return r.a.createElement("div",{title:e},t)},a._formatDetails=function(e){return ve(e.split(";"))},a._renderTable=function(e){var t=[{width:1,header:"ETA",dataPath:["timestamp","eta"],formatter:a._formatTimeStamp},{width:2,header:"Action",dataPath:["step"],formatter:Z},{width:2,header:"Entity",dataPath:["source"],formatter:Z},{width:4,header:"Details",dataPath:["details"],formatter:a._formatDetails}],n=e.map(function(e){return t.map(function(t){var a=O.a.get(t,"formatter",null);if(a)try{var n=t.dataPath.map(function(t){return"[object]"===t?e:O.a.get(e,t,"-")});return a.apply(void 0,Object(Me.a)(n))}catch(r){return a||"-"}return O.a.get(e,t.dataPath[0],"-")})});return O.a.isEmpty(e)?we(a.state.loadingPercentage):r.a.createElement("div",null,r.a.createElement("div",{className:"w-100 flex-row flex-jc-fe"},r.a.createElement(We.a,{firstItem:null,lastItem:null,activePage:a.state.activePage,onPageChange:a.handlePaginationChange,totalPages:Math.ceil(a.state.logsDataSource.length/a.tableRowLength)})),r.a.createElement(Fe.a,{celled:!0},r.a.createElement(Fe.a.Header,null,r.a.createElement(Fe.a.Row,null,t.map(function(e){return r.a.createElement(Fe.a.HeaderCell,{width:e.width},e.header)}))),r.a.createElement(Fe.a.Body,null,n.map(function(e){return r.a.createElement(Fe.a.Row,null,e.map(function(e){return r.a.createElement(Fe.a.Cell,null,e)}))}))))},a._renderPage=function(){var e=a.state,t=e.logsData,n=e.logsDataSource;return r.a.createElement(he.a.Group,null,r.a.createElement(Le.a,{as:"h5",attached:"top"},r.a.createElement("div",null,lt)),r.a.createElement(he.a,null,r.a.createElement(Ye.a,{icon:"search",placeholder:"Search..."}),r.a.createElement(v.a,null,r.a.createElement("p",null,"Viewing all ",n.length," ",lt))),r.a.createElement(he.a,null,a._renderTable(t)))},a.tableRowLength=10,a.state={activePage:1,showConfirm:!1,versioned:!0,value:1,loading:!0,logsData:[],logsDataSource:[],selectedEntities:[],loadingPercentage:10},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getIntitalData();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this._renderPage()}}]),t}(n.Component),ot=a(424),ct=x.ACTIONS,st=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleChangeEntity=function(e,t){var n;a.setState((n={},Object(f.a)(n,t,e),Object(f.a)(n,"version",null),n))},a.handleChangeVersion=function(e,t){var n=t.value;return a.setState({version:n})},a.handleNext=function(){var e=a.state.step;e<2&&(e+=1,a.setState({step:e}))},a.handleBack=function(){var e=a.state.step;e>0&&(e-=1,a.setState({step:e}))},a.handleDeploy=Object(s.a)(c.a.mark(function e(){var t,n,r,l,i,o,s,u,d;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.selectedEntity,r=t.version,a.setState({deployResponse:{text:"Please wait while the build is being deployed.",title:"Deploying",isPositive:!0},loading:!0}),l={},e.next=5,le(ct.DEPLOY_ENTITY,{entity:n,filename:r});case 5:l=e.sent,l=O.a.get(l,"data",{}),o=(i=l).logs,s=i.message,u=i.status,d={text:(o=o||[]).join(". "),title:s,isPositive:"success"===u},a.setState({loading:!1,deployResponse:d});case 11:case"end":return e.stop()}},e)})),a._isButtonDisabled=function(e,t,a,n){switch(n){case 0:return e;case 1:case 2:return t&&!a;default:return!1}},a._versionSearchSelection=function(e){var t=e.map(function(e){return{key:e.name,value:e.name,flag:e.name,text:e.name}});return r.a.createElement("div",{className:"search-version-dropdown"},r.a.createElement(Ie.a,{value:a.state.version,placeholder:"Select Version",onChange:a.handleChangeVersion,fluid:!0,search:!0,selection:!0,options:t}))},a._stepsWizard=function(e,t){return r.a.createElement(ot.a.Group,{ordered:!0},r.a.createElement(ot.a,{completed:e>0},r.a.createElement(ot.a.Content,null,r.a.createElement(ot.a.Title,null,"Entity Type"),r.a.createElement(ot.a.Description,null,"Choose your entity type"))),r.a.createElement(ot.a,{completed:e>1},r.a.createElement(ot.a.Content,null,r.a.createElement(ot.a.Title,null,"Version"),r.a.createElement(ot.a.Description,null,"Choose version of your entity"))),r.a.createElement(ot.a,{completed:e>1&&t},r.a.createElement(ot.a.Content,null,r.a.createElement(ot.a.Title,null,"Deploy"),r.a.createElement(ot.a.Description,null,"Deploy the entity"))))},a._renderPage=function(){var e,t,n=a.state,l=n.backupData,i=n.selectedEntity,o=n.loading,c=n.deployResponse,s=n.step,u=n.tunnelsData,d=n.version,m=null!==d,h=u.map(function(e,t){return{key:t+1,text:"Deploy Latest ".concat(Z(e.entity)),value:e.entity}}),g=O.a.find(u,function(e){return e.entity===i})||{},p=O.a.get(g,"remote_path","-"),E=O.a.get(g,"entity","-"),f=O.a.get(l,"data.".concat(p),[]);f=O.a.filter(f,function(e){return e.name.includes(".FN.")})||[];var b=O.a.find(f,function(e){return e.name===d})||{},w=null!==O.a.get(b,"path",null);t=fe("".concat(E," Build Information"),b,w,m,l.source),e=a._isButtonDisabled(o,m,w,s);return r.a.createElement(he.a.Group,null,r.a.createElement(Le.a,{as:"h5",attached:"top"},r.a.createElement("div",null,"Deploy Wizard")),r.a.createElement(he.a,null,r.a.createElement(v.a,null,r.a.createElement(v.a.Header,null,"What does it do?"),r.a.createElement("p",null,"This workflow deploys the selected versioned builds."))),r.a.createElement(he.a,null,a._stepsWizard(s,c.isPositive)),0===s&&r.a.createElement(he.a,null,r.a.createElement(Ie.a,{disabled:o,onChange:function(e,t){var n=t.value;return a.handleChangeEntity(n,"selectedEntity")},options:h,placeholder:"Choose an entity",selection:!0,value:i}),r.a.createElement("div",{className:"deploy-wizard-message-container"},r.a.createElement(v.a,null,r.a.createElement(v.a.Header,null,"Deployment Entity"),r.a.createElement("p",null,"This Deploys a version of the ".concat(E," on your hosting."))))),1===s&&r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a,null,a._versionSearchSelection(f),t)),2===s&&r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a,null,r.a.createElement("div",null,r.a.createElement(Ye.a,{label:"Entity",value:i,disabled:!0}),r.a.createElement(Ye.a,{className:"build-file-name",label:"Build File",value:b.name,disabled:!0})),t)),r.a.createElement(he.a,null,r.a.createElement(y.a,{onClick:function(){return a.handleBack()},disabled:o||s<1,loading:o},"Back"),r.a.createElement(y.a,{onClick:function(){return s>1?a.handleDeploy():a.handleNext()},disabled:e,loading:o,primary:!0},s>1?"Deploy":"Next"),r.a.createElement(v.a,{icon:!0,positive:c.isPositive&&!o,negative:!c.isPositive&&!o},r.a.createElement(se.a,{name:"circle notched",loading:o}),r.a.createElement(v.a.Content,null,r.a.createElement(v.a.Header,null,c.title),c.text))))},a.state={step:0,selectedEntity:"",version:null,deployResponse:{text:"We are fetching that content for you.",title:"Just one second",isPositive:!1},loading:!0,backupData:{},tunnelsData:[]},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(c.a.mark(function e(){var t,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(ct.BACKUP_STATUS);case 2:return t=e.sent,e.next=5,le(ct.GET_TUNNELS);case 5:a=e.sent,t=O.a.get(t,"data",{}),a=O.a.get(a,"data.rows",[]),this.setState({loading:!1,backupData:t,tunnelsData:a,deployResponse:{text:"We are ready to deploy the builds.",title:"Ready",isPositive:!0}});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this._renderPage()}}]),t}(n.Component),ut=x.ACTIONS,dt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onSelectChange=function(e,t){a.setState(Object(f.a)({},t,e))},a.handleDeploy=Object(s.a)(c.a.mark(function e(){var t,n,r,l,i,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({deployResponse:{text:"Please wait while the build is being deployed.",title:"Deploying",isPositive:!0},loading:!0}),e.next=3,le(ut.DEPLOY);case 3:t=e.sent,t=O.a.get(t,"data",{}),r=(n=t).logs,l=n.message,i=n.status,o={text:r.join(". "),title:l,isPositive:"success"===i},a.setState({loading:!1,deployResponse:o});case 8:case"end":return e.stop()}},e)})),a._renderPage=function(){var e,t,n=a.state,l=n.backupData,i=n.loading,o=n.deployResponse,c=n.tunnelsData,s=n.selectedEntity,u=""!==s,d=c.map(function(e,t){return{key:t+1,text:"Deploy Latest ".concat(Z(e.entity)),value:e.entity}}),m=O.a.find(c,function(e){return e.entity===s})||{},h=O.a.get(m,"remote_path","-"),g=O.a.get(m,"entity","-"),p=O.a.get(l,"data.".concat(h),[]);p=O.a.filter(p,function(e){return!e.name.includes(".FN.")}),p=O.a.last(p)||{};var E=null!==O.a.get(p,"path",null);return e=!E,t=fe("".concat(Z(g)," LKG Build Information"),p,E,u,l.source),r.a.createElement(he.a.Group,null,r.a.createElement(Le.a,{as:"h5",attached:"top"},r.a.createElement("div",null,"Deploy LKG")),r.a.createElement(he.a,null,r.a.createElement(v.a,null,r.a.createElement(v.a.Header,null,"What does it do?"),r.a.createElement("p",null,"This workflow deploys the last known good builds."))),r.a.createElement(he.a,null,r.a.createElement(Ie.a,{disabled:i,onChange:function(e,t){var n=t.value;return a.onSelectChange(n,"selectedEntity")},options:d,placeholder:"Choose an option",selection:!0,value:s})),r.a.createElement(he.a,null,t),r.a.createElement(he.a,null,r.a.createElement(y.a,{onClick:a.handleDeploy,disabled:e||i,loading:i,primary:!0},"Deploy"),r.a.createElement(v.a,{icon:!0,positive:o.isPositive&&!i,negative:!o.isPositive&&!i},r.a.createElement(se.a,{name:"circle notched",loading:i}),r.a.createElement(v.a.Content,null,r.a.createElement(v.a.Header,null,o.title),o.text))))},a.state={selectedEntity:"",deployResponse:{text:"We are fetching that content for you.",title:"Just one second",isPositive:!1},loading:!0,backupData:{},tunnelsData:[]},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(c.a.mark(function e(){var t,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(ut.BACKUP_STATUS);case 2:return t=e.sent,e.next=5,le(ut.GET_TUNNELS);case 5:a=e.sent,t=O.a.get(t,"data",{}),a=O.a.get(a,"data.rows",[]),this.setState({loading:!1,backupData:t,tunnelsData:a,deployResponse:{text:"We are ready to deploy the builds.",title:"Ready",isPositive:!0}});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this._renderPage()}}]),t}(n.Component),mt=x.ACTIONS,ht=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onSelectChange=function(e,t){a.setState(Object(f.a)({},t,e))},a.toggle=function(){return a.setState(function(e){return{versioned:!e.versioned}})},a.handleBackup=function(){var e=Object(s.a)(c.a.mark(function e(t,n){var r,l,i,o,s,u;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({backupResponse:{text:"Please wait while the backup is being created.",title:"Backup In Progress",isPositive:!0},loading:!0}),e.next=3,le(mt.BACKUP_ENTITY,{entity:t,versioned:n});case 3:r=e.sent,r=O.a.get(r,"data",{}),i=(l=r).logs,o=l.message,s=l.status,u={text:(i=i||["Oops! Something went wrong."]).join(". "),title:o,isPositive:"success"===s},a.setState({loading:!1,backupResponse:u}),a.props.refetchNotification();case 10:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a._renderPage=function(){var e,t=a.state,n=t.backupData,l=t.selectedEntity,i=t.loading,o=t.backupResponse,c=t.versioned,s=t.tunnelsData,u=""!==l,d=s.map(function(e,t){return{key:t+1,text:"Backup ".concat(Z(e.entity)),value:e.entity}}),m=O.a.find(s,function(e){return e.entity===l})||{},h=O.a.get(m,"remote_path","-"),g=O.a.get(m,"entity","-"),p=O.a.get(n,"data.".concat(h),[]);p=c?O.a.filter(p,function(e){return e.name.includes(".FN.")}):O.a.filter(p,function(e){return!e.name.includes(".FN.")}),p=O.a.last(p)||{};var E=null!==O.a.get(p,"path",null);return e=fe("".concat(Z(g)," ").concat(c?"Versioned":""," Backup Information"),p,E,u,n.source),r.a.createElement(he.a.Group,null,r.a.createElement(Le.a,{as:"h5",attached:"top"},r.a.createElement("div",null,"Backup LKG/Versioned")),r.a.createElement(he.a,null,r.a.createElement(v.a,null,r.a.createElement(v.a.Header,null,"What does it do?"),r.a.createElement("p",null,"This workflow creates a backup of the last known good (deployed) entitites."))),r.a.createElement(he.a,null,r.a.createElement(Ie.a,{disabled:i,onChange:function(e,t){var n=t.value;return a.onSelectChange(n,"selectedEntity")},options:d,placeholder:"Choose an option",selection:!0,value:l}),r.a.createElement(w.a,{onChange:a.toggle,checked:a.state.versioned,className:"backup-version-cbox",label:"Versioned"})),r.a.createElement(he.a,null,e),r.a.createElement(he.a,null,r.a.createElement(y.a,{onClick:function(){return a.handleBackup(l,c)},disabled:i,loading:i,primary:!0},"Backup"),r.a.createElement(v.a,{icon:!0,positive:o.isPositive&&!i,negative:!o.isPositive&&!i},r.a.createElement(se.a,{name:"circle notched",loading:i}),r.a.createElement(v.a.Content,null,r.a.createElement(v.a.Header,null,o.title),o.text))))},a.state={versioned:!0,selectedEntity:"",backupResponse:{text:"We are fetching that content for you.",title:"Just one second",isPositive:!1},loading:!0,backupData:{},tunnelsData:[]},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(c.a.mark(function e(){var t,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(mt.BACKUP_STATUS);case 2:return t=e.sent,e.next=5,le(mt.GET_TUNNELS);case 5:a=e.sent,t=O.a.get(t,"data",{}),a=O.a.get(a,"data.rows",[]),this.setState({loading:!1,backupData:t,tunnelsData:a,backupResponse:{text:"We are ready to backup the builds.",title:"Ready",isPositive:!0}});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this._renderPage()}}]),t}(n.Component),gt=a(433),pt=x.ACTIONS,Et=[{key:"BACKUP",text:"BACKUP",value:"BACKUP"},{key:"DEPLOY",text:"DEPLOY",value:"DEPLOY"}],ft=[{key:"running",text:Ee("running","Running"),value:"running"},{key:"stopped",text:Ee("stopped","Stopped"),value:"stopped"}],vt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={versioned:!0,loading:!0,selectedEntity:"",open:!1,loadingtunnelOptions:!0,schedulerSchema:[],errors:[]},a.handleRadio=function(e,t){var n=t.value;return a.setState({versioned:n})},a.onChange=function(e,t){var n,r,l=e.target.value,i=Object(_.a)({},a.state),o={};switch(t){case"entity":n={},Object(f.a)(n,t,l),Object(f.a)(n,"remote_path","".concat(l.toUpperCase(),"_BACKUP")),o=n,i=O.a.extend(i,o),a.setState(i);break;default:a.setState((r={},Object(f.a)(r,t,l),Object(f.a)(r,"errors",[]),r))}},a.onSelectChange=function(e,t){var n;a.setState((n={},Object(f.a)(n,t,e),Object(f.a)(n,"errors",[]),n))},a.setOpen=Object(s.a)(c.a.mark(function e(){var t,n,r,l,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({open:!0}),e.next=3,le(pt.SCHEMA,{table:"scheduler"});case 3:return t=e.sent,e.next=6,le(pt.GET_TUNNELS);case 6:n=e.sent,n=O.a.get(n,"data.rows",[]),t=O.a.get(t,"data.columns",[]),r=["id","timestamp_exec"],t=O.a.remove(t,function(e){return!r.includes(e)}),l={},t.forEach(function(e){var t=null;"params"===e&&(t={}),l=O.a.extend(l,Object(f.a)({},e,t))}),i=O.a.extend(l,{loading:!1,loadingtunnelOptions:!1,tunnelOptions:n,schedulerSchema:t,open:!0}),a.setState(i);case 15:case"end":return e.stop()}},e)})),a.setClose=function(){a.setState({open:!1})},a.handleSubmit=Object(s.a)(c.a.mark(function e(){var t,n,r,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.schedulerSchema,n={},t.forEach(function(e){var t=e,r=O.a.get(a.state,e,"");if("params"===e){var l=O.a.get(a.state,"versioned",!1),i={entity:O.a.get(a.state,"selectedEntity",""),versioned:l};r=JSON.stringify(i)}n=O.a.extend(n,Object(f.a)({},t,r))}),e.next=5,le(pt.ADD_SCHEDULER,n);case 5:r=e.sent,"success"===(r=O.a.get(r,"data",{})).status?(a.setClose(),a.props.refreshTable(),Q(r.message)):((l=[]).push(X(O.a.get(r,"error",""))),a.setState({errors:l}));case 8:case"end":return e.stop()}},e)})),a._inputSectionParams=function(){var e=a.state.tunnelOptions.map(function(e){return{key:e.entity,text:Object(gt.a)(e.entity),value:e.entity}});return r.a.createElement(r.a.Fragment,null,r.a.createElement(de.a,null),r.a.createElement("label",null,r.a.createElement("a",{href:!0},"Entities")),r.a.createElement(Ie.a,{placeholder:"Select Entity",value:a.state.contents,fluid:!0,loading:a.state.loadingtunnelOptions,selection:!0,onChange:function(e,t){var n=t.value;return a.onSelectChange(n,"selectedEntity")},options:e}),r.a.createElement("label",{className:"mt-10 mb-10"},r.a.createElement("a",{href:!0},"Backup Type")),r.a.createElement(Ze.a,{label:"LKG",name:"radioGroup",value:!1,checked:!1===a.state.versioned,onChange:a.handleRadio}),r.a.createElement(Ze.a,{className:"ml-15",label:"Versioned",name:"radioGroup",value:!0,checked:!0===a.state.versioned,onChange:a.handleRadio}),r.a.createElement(v.a,{info:!0,className:"mt-10"},a.state.versioned?r.a.createElement("p",null,"This will always create a new verson of backup on job execution."):r.a.createElement("p",null,"This will overwrite the previously existing LKG Backup on job execution.")),r.a.createElement(de.a,null))},a._populateFormFields=function(){var e=a.state,t=e.schedulerSchema,n=e.loadingtunnelOptions;return e.loading?ke():t.map(function(e){switch(e){case"operation":return r.a.createElement(b.a.Field,null,r.a.createElement("label",null,J(e)),r.a.createElement(Ie.a,{placeholder:"Select Operation",value:a.state.operation,fluid:!0,loading:n,selection:!0,onChange:function(e,t){var n=t.value;return a.onSelectChange(n,"operation")},options:Et}));case"state":return r.a.createElement(b.a.Field,null,r.a.createElement("label",null,J(e)),r.a.createElement(Ie.a,{placeholder:"Select State",value:a.state.state,fluid:!0,loading:n,selection:!0,onChange:function(e,t){var n=t.value;return a.onSelectChange(n,"state")},options:ft}));case"params":return r.a.createElement(b.a.Field,null,r.a.createElement("label",null,J(e)),a._inputSectionParams());default:return r.a.createElement(b.a.Field,null,r.a.createElement("label",null,J(e)),r.a.createElement("input",{placeholder:J(e),onChange:function(t){return a.onChange(t,e)},value:a.state[e]}))}})},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state.loading;return r.a.createElement(ze.a,{className:"fullpage-modal",closeOnDimmerClick:!1,animation:"fade up",duration:200,onClose:function(){return e.setClose()},onOpen:function(){return e.setOpen()},open:this.state.open,trigger:this.props.trigger},r.a.createElement(Ke.a.Header,null,Ce("Create Job",this.setClose)),r.a.createElement(Ke.a.Content,null,r.a.createElement(Ke.a.Description,null,r.a.createElement("div",{className:"add-form-body w-50"},r.a.createElement(b.a,{error:!0},r.a.createElement(v.a,{className:this.state.errors.length>0?"alert visible":"alert invisible",error:!0,header:"Failed",content:this.state.errors.join(". ")}),this._populateFormFields())))),r.a.createElement(Ke.a.Actions,null,r.a.createElement(y.a,{onClick:function(){return e.setClose()}},"Cancel"),r.a.createElement(y.a,{disabled:t,content:"Submit",onClick:function(){return e.handleSubmit()},positive:!0})))}}]),t}(n.Component);function bt(e){var t=e.trigger,a=e.execute,n=e.selectedEntities,l=r.a.useState(!1),i=Object(_e.a)(l,2),o=i[0],c=i[1];return r.a.createElement(ze.a,{closeOnDimmerClick:!1,animation:"fade up",duration:200,onClose:function(){return c(!1)},onOpen:function(){return c(!0)},open:o,trigger:t},r.a.createElement(Ke.a.Header,null,"Delete Job"),r.a.createElement(Ke.a.Content,{image:!0},r.a.createElement(Ke.a.Description,null,r.a.createElement(v.a,{warning:!0},r.a.createElement(v.a.Header,null,"Backup shutdown imminent"),r.a.createElement("p",null,"Deleting this job will shutdown the auto backup process for this particular entity.")),r.a.createElement("p",null,"Are you sure you want to delete ",r.a.createElement("b",null,n.join(", "))," ?"))),r.a.createElement(Ke.a.Actions,null,r.a.createElement(y.a,{onClick:function(){return c(!1)}},"Cancel"),r.a.createElement(y.a,{onClick:function(){c(!1),a()},negative:!0},"Delete")))}function yt(e){var t=e.trigger,a=e.execute,n=e.selectedEntities,l=r.a.useState(!1),i=Object(_e.a)(l,2),o=i[0],c=i[1];return r.a.createElement(ze.a,{closeOnDimmerClick:!1,animation:"fade up",duration:200,onClose:function(){return c(!1)},onOpen:function(){return c(!0)},open:o,trigger:t},r.a.createElement(Ke.a.Header,null,"Stop Job"),r.a.createElement(Ke.a.Content,{image:!0},r.a.createElement(Ke.a.Description,null,r.a.createElement(v.a,{warning:!0},r.a.createElement(v.a.Header,null,"Backup shutdown imminent"),r.a.createElement("p",null,"Stopping this job will shutdown the auto backup process for this particular entity.")),r.a.createElement("p",null,"Are you sure you want to stop ",r.a.createElement("b",null,n.join(", "))," ?"))),r.a.createElement(Ke.a.Actions,null,r.a.createElement(y.a,{onClick:function(){return c(!1)}},"Cancel"),r.a.createElement(y.a,{onClick:function(){c(!1),a()},negative:!0},"Stop")))}var wt=x.ACTIONS,kt="Job",Ct=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).setLoading=function(e){a.setState({loading:e})},a.markLoadingProgress=function(e){a.setState({loadingPercentage:e})},a._getIntitalData=Object(s.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(wt.GET_SCHEDULER);case 2:t=e.sent,a.markLoadingProgress(25),t=O.a.get(t,"data.rows",{}),a.setState({loading:!1,schedulerData:t});case 6:case"end":return e.stop()}},e)})),a.handleDeleteAction=function(){var e=Object(s.a)(c.a.mark(function e(t){var n,r,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.a.first(t),e.next=3,le(wt.DELETE_SCHEDULER,{id:n});case 3:return r=e.sent,r=O.a.get(r,"data",{}),l=O.a.get(r,"message","Deletion failed"),"success"===r.status?Q(l):ee(l),e.next=9,a._getIntitalData();case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleChangeStateAction=function(){var e=Object(s.a)(c.a.mark(function e(t,n){var r,l,i,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=O.a.first(t),l=n?"running":"stopped",e.next=4,le(wt.UPDATE_SCHEDULER,{id:r,state:l});case 4:return i=e.sent,i=O.a.get(i,"data",{}),o=O.a.get(i,"message","Update failed"),"success"===i.status?Q(o):ee(o),e.next=10,a._getIntitalData();case 10:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.CardPanels=function(e){var t=e.map(function(e){var t=e.operation,n=e.state,l=e.params,i=e.eta;return{header:r.a.createElement("div",null,r.a.createElement("div",{className:"flex-row flex-jc-sb"},Ee(n,Z(t.toLowerCase())),r.a.createElement(Ie.a,{item:!0,text:""},r.a.createElement(Ie.a.Menu,null,r.a.createElement(bt,{execute:function(){return a.handleDeleteAction([e.id])},selectedEntities:[e.id],trigger:r.a.createElement(Ie.a.Item,{text:"Delete"})}),"running"===e.state?r.a.createElement(yt,{execute:function(){return a.handleChangeStateAction([e.id],!1)},selectedEntities:[e.id],trigger:r.a.createElement(Ie.a.Item,{text:"Stop"})}):r.a.createElement(Ie.a.Item,{text:"Start",onClick:function(){return a.handleChangeStateAction([e.id],!0)}})))),r.a.createElement(de.a,null)),description:function(){for(var e=[],t=0,a=Object.entries(l);t<a.length;t++){var n=a[t],i=Object(_e.a)(n,2),o=i[0],c=i[1];e.push({key:o,value:c})}var s=e.map(function(e){return"versioned"===e.key?be("Type",e.value?"Versioned":"LKG"):be(Z(e.key),Z(e.value))});return r.a.createElement("div",null,s)}(),meta:"Last Executed ".concat(i)}});return r.a.createElement(C.a.Group,{itemsPerRow:4,items:t})},a._renderPage=function(){var e=a.state,t=e.loading,n=e.loadingPercentage,l=e.schedulerData;return t?we(n):r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a.Group,null,r.a.createElement(he.a,{className:"flex-row flex-jc-sb"},r.a.createElement(vt,{refreshTable:a._getIntitalData,trigger:r.a.createElement(y.a,{icon:!0,labelPosition:"right",primary:!0},r.a.createElement(se.a,{name:"add"}),"Create ".concat(kt))}),r.a.createElement(y.a.Group,{icon:!0},r.a.createElement(y.a,null,r.a.createElement(se.a,{name:"play"})),r.a.createElement(y.a,null,r.a.createElement(se.a,{name:"pause"}))))),a.CardPanels(l))},a.state={loadingPercentage:15,loading:!0,schedulerData:{},storageData:{},dbData:{}},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this._getIntitalData()}},{key:"render",value:function(){return this._renderPage()}}]),t}(n.Component),St=x.ACTIONS,Dt="Backup",Ot=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).setLoading=function(e){a.setState({loading:e})},a.resetSelection=function(){a.setState({selectedEntities:[]})},a._getIntitalData=Object(s.a)(c.a.mark(function e(){var t,n,r,l,i,o,s,u,d,m,h;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.timer=setInterval(function(){return a.progressContinue()},25),e.next=3,le(St.BACKUP_STATUS);case 3:for(t=e.sent,t=O.a.get(t,"data.data",[]),n=[],r=[],l=0,i=Object.entries(t);l<i.length;l++)o=i[l],s=Object(_e.a)(o,2),u=s[0],d=s[1],n=n.concat(d),r=r.concat(u);m=t=n,h=t,a.updateLoadingProgress(90),clearInterval(a.timer),a.setState({loading:!1,backupData:t,backupDirs:r,search:"",backupDataSource:h,backupResultData:m,selectedEntities:[]}),a.handlePaginationChange({activePage:1});case 15:case"end":return e.stop()}},e)})),a._paginationHelper=function(e,t){var n=[];e=O.a.sortBy(e,function(e){return e.server_modified}),e=O.a.reverse(e);for(var r=(t-1)*a.tableRowLength;r<=t*a.tableRowLength-1;r++)r<e.length&&n.unshift(e[r]);return n},a.handlePaginationChange=function(e){var t=e.activePage,n=Object(_.a)({},a.state).backupResultData,r=a._paginationHelper(n,t);a.setState({backupData:r,activePage:t})},a.onChangeSearch=function(e){var t=e.target.value,n=a.state.backupDataSource,r=O.a.filter(n,function(e){return e.name.includes(t)}),l=a._paginationHelper(r,1);a.setState({backupData:l,backupResultData:r,search:t,errors:[]})},a.onSelectChange=function(e,t){var n,r=Object(_.a)({},a.state).backupDataSource.filter(function(t){return 0===e.length||e.includes(t.dir)}),l=a._paginationHelper(r,1);a.setState((n={},Object(f.a)(n,t,e),Object(f.a)(n,"backupResultData",r),Object(f.a)(n,"backupData",l),Object(f.a)(n,"activePage",1),n))},a.handleDeleteAction=Object(s.a)(c.a.mark(function e(){var t,n,r,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.selectedEntities,n=O.a.first(t),a.setLoading(!0),e.next=5,le(St.DELETE_TUNNEL,{entity:n});case 5:return r=e.sent,r=O.a.get(r,"data",{}),l=O.a.get(r,"message","Deletion failed"),"success"===r.status?Q(l):ee(l),e.next=11,a._getIntitalData();case 11:case"end":return e.stop()}},e)})),a.handleDownloadAction=Object(s.a)(c.a.mark(function e(){var t,n,l,i,o,s,u,d,m,h,g,p;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.selectedEntities,l=t.backupDataSource,i=O.a.first(n),o=O.a.find(l,function(e){return e.name===i})||{},s=O.a.get(o,"path",""),e.next=6,le(St.GET_BACKUP_LINK,{filepath:s});case 6:u=e.sent,u=O.a.get(u,"data",{}),d=O.a.get(u,"message","Download failed"),m=O.a.get(u,"link",""),h=O.a.get(u,"details.name",""),g=O.a.get(u,"details.size",""),p=r.a.createElement("div",null,r.a.createElement("div",null,h),r.a.createElement("div",null,g),r.a.createElement("div",null,d),r.a.createElement(y.a,{positive:!0,className:"mt-20",icon:!0,href:m,labelPosition:"right"},"Download",r.a.createElement(se.a,{name:"download"}))),"success"===u.status?Q(p,"Success",120):ee(d),a.resetSelection();case 15:case"end":return e.stop()}},e)})),a.handleSelect=function(e){var t=Object(_.a)({},a.state).selectedEntities;O.a.includes(t,e)?t=O.a.remove(t,function(t){return t!==e}):t.push(e),a.setState({selectedEntities:t})},a._renderTable=function(e){var t=[{width:1,header:"",dataPath:["name"],formatter:function(e){return r.a.createElement(w.a,{name:e,onChange:function(){return a.handleSelect(e)},checked:O.a.includes(a.state.selectedEntities,e)})}},{width:4,header:"File",dataPath:["name"],formatter:Z},{width:2,header:"Size",dataPath:["size"]},{width:4,header:"ETA",dataPath:["eta"]}],n=e.map(function(e){return t.map(function(t){var a=O.a.get(t,"formatter",null);if(a)try{var n=t.dataPath.map(function(t){return"[object]"===t?e:O.a.get(e,t,"-")});return a.apply(void 0,Object(Me.a)(n))}catch(r){return a||"-"}return O.a.get(e,t.dataPath[0],"-")})});if(O.a.isEmpty(e))return we(a.state.loadingPercentage);var l=Math.ceil(a.state.backupResultData.length/a.tableRowLength);return r.a.createElement("div",null,r.a.createElement("div",{className:"w-100 flex-row flex-jc-fe pt-10"},r.a.createElement(We.a,{firstItem:null,lastItem:null,activePage:a.state.activePage,onPageChange:function(e,t){var n=t.activePage;return a.handlePaginationChange({activePage:n})},totalPages:l})),r.a.createElement(Fe.a,{celled:!0},r.a.createElement(Fe.a.Header,null,r.a.createElement(Fe.a.Row,null,t.map(function(e){return r.a.createElement(Fe.a.HeaderCell,{width:e.width},e.header)}))),r.a.createElement(Fe.a.Body,null,n.map(function(e){return r.a.createElement(Fe.a.Row,null,e.map(function(e){return r.a.createElement(Fe.a.Cell,null,e)}))}))))},a._renderTableMessage=function(e){var t=a.state.loading,n=r.a.createElement("p",null,"Viewing all ",e.length," ",Dt);return t&&(n=r.a.createElement("p",null,r.a.createElement(se.a,{name:"circle notched blue",loading:!0}),q())),r.a.createElement(v.a,null,n)},a._renderPage=function(){var e=a.state,t=e.backupData,n=e.backupDataSource,l=e.selectedEntities,i=e.backupDirs,o=e.loading,c=i.map(function(e){return{key:e,text:e,value:e}});return r.a.createElement(he.a.Group,null,r.a.createElement(Le.a,{as:"h5",attached:"top"},r.a.createElement("div",null,Dt," Explorer")),r.a.createElement(he.a,null,r.a.createElement("div",{className:"flex-row flex-jc-sb w-100"},r.a.createElement("div",null,r.a.createElement(Ie.a,{disabled:1!==l.length,button:!0,text:"Actions"},r.a.createElement(Ie.a.Menu,{closeOnBlur:!0,closeOnChange:!0},r.a.createElement(Xe,{execute:a.handleDeleteAction,selectedEntities:l,trigger:r.a.createElement(Ie.a.Item,{disabled:1!==l.length,text:"Delete"})}),r.a.createElement(Ie.a.Item,{onClick:a.handleDownloadAction,disabled:1!==l.length,text:"Download"})))),r.a.createElement(Ye.a,{disabled:o,icon:"search",onChange:function(e){return a.onChangeSearch(e)},placeholder:"Search..."})),r.a.createElement("div",null,r.a.createElement(Ie.a,{disabled:o,loading:o,className:"mt-20",placeholder:"All Directories",onChange:function(e,t){var n=t.value;return a.onSelectChange(n,"selectedDirs")},multiple:!0,search:!0,fluid:!0,selection:!0,options:c})),a._renderTableMessage(n)),r.a.createElement(he.a,{className:"table-segment"},a._renderTable(t)))},a.tableRowLength=5,a.state={activePage:1,value:1,loading:!0,selectedDirs:[],backupDirs:[],backupData:[],backupDataSource:[],selectedEntities:[],loadingPercentage:10},a.updateLoadingProgress=te.bind(Object(Ae.a)(Object(Ae.a)(a))),a.progressContinue=ae.bind(Object(Ae.a)(Object(Ae.a)(a))),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getIntitalData();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){return this._renderPage()}}]),t}(n.Component),xt=x.PAGES,Pt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={activeItem:W()||xt.DASHBOARD},a.handleItemClick=function(e,t){var n=t.name;return a.setState({activeItem:n})},a._renderPage=function(e){switch(M(e),F(),e){case xt.DASHBOARD:return r.a.createElement(Be,null);case xt.WIZARD_DEPLOY:return r.a.createElement(st,null);case xt.LKG_DEPLOY:return r.a.createElement(dt,null);case xt.LKG_BACKUP:return r.a.createElement(ht,{refetchNotification:a.props.refetchNotification});case xt.TUNNELS:return r.a.createElement(nt,null);case xt.ACTIVITIES:return r.a.createElement(it,null);case xt.SCHEDULER:return r.a.createElement(Ct,null);case xt.EXPLORER:return r.a.createElement(Ot,null);default:return r.a.createElement("div",null)}},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.activeItem;return r.a.createElement("div",{className:"content-panel"},r.a.createElement(Pe.a,{className:"menu-vertical-home",vertical:!0},r.a.createElement(Pe.a.Item,{name:xt.DASHBOARD,active:e===xt.DASHBOARD,onClick:this.handleItemClick},r.a.createElement(se.a,{name:"grid layout"}),Z(xt.DASHBOARD)),r.a.createElement(Pe.a.Item,{name:xt.TUNNELS,active:e===xt.TUNNELS,onClick:this.handleItemClick},r.a.createElement(se.a,{name:"exchange"}),Z(xt.TUNNELS)),r.a.createElement(Pe.a.Item,null,"Deploy",r.a.createElement(Pe.a.Menu,null,r.a.createElement(Pe.a.Item,{name:xt.WIZARD_DEPLOY,active:e===xt.WIZARD_DEPLOY,onClick:this.handleItemClick},Z(xt.WIZARD)),r.a.createElement(Pe.a.Item,{name:xt.LKG_DEPLOY,active:e===xt.LKG_DEPLOY,onClick:this.handleItemClick},xt.LKG.toLocaleUpperCase()))),r.a.createElement(Pe.a.Item,null,"Backup",r.a.createElement(Pe.a.Menu,null,r.a.createElement(Pe.a.Item,{name:xt.LKG_BACKUP,active:e===xt.LKG_BACKUP,onClick:this.handleItemClick},xt.LKG.toLocaleUpperCase()),r.a.createElement(Pe.a.Item,{name:xt.EXPLORER,active:e===xt.EXPLORER,onClick:this.handleItemClick},Z(xt.EXPLORER)))),r.a.createElement(Pe.a.Item,{name:xt.SCHEDULER,active:e===xt.SCHEDULER,onClick:this.handleItemClick},r.a.createElement(se.a,{name:"history"}),Z(xt.SCHEDULER)),r.a.createElement(Pe.a.Item,{name:xt.ACTIVITIES,active:e===xt.ACTIVITIES,onClick:this.handleItemClick},r.a.createElement(se.a,{name:"list"}),Z(xt.ACTIVITIES)),r.a.createElement(Ie.a,{item:!0,text:"More"},r.a.createElement(Ie.a.Menu,null,r.a.createElement(Ie.a.Item,{icon:"edit",text:"Edit Profile"}),r.a.createElement(Ie.a.Item,{icon:"globe",text:"Choose Language"}),r.a.createElement(Ie.a.Item,{icon:"settings",text:"Account Settings"})))),r.a.createElement("div",{className:"content-section"},this._renderPage(e)))}}]),t}(n.Component),It=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e)))._renderPage=function(){return r.a.createElement("div",null,r.a.createElement(L.a,null),r.a.createElement(je,{ref:function(e){a.content=e},setAppLoader:a.props.setAppLoader}),r.a.createElement(Pt,{refetchNotification:function(){return a.content._getIntitalData()}}))},a.state={loggedIn:!1},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce();case 2:t=e.sent,this.setState({loggedIn:t}),this.props.setAppLoader(!1);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this._renderPage()}}]),t}(n.Component),Nt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).setAppLoader=function(e){a.setState({loading:e})},a._renderPage=function(){var e=a.state,t=e.loading,n=e.loggedIn,l=r.a.createElement(p.a,{active:!0,inverted:!0},r.a.createElement(E.a,{content:"Loading"}));return t?l:n?r.a.createElement(It,{setAppLoader:a.setAppLoader}):r.a.createElement(xe,{setAppLoader:a.setAppLoader})},a.state={loading:!0,loggedIn:!1},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce();case 2:t=e.sent,this.setState({loggedIn:t,loading:!1});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this._renderPage()}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Nt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[236,1,2]]]);
//# sourceMappingURL=main.5d583b19.chunk.js.map